import{j as a,O as F,r as N,Q as $,M as v,b as Y,d as B,n as Z,G as h,x as P,y as A,l as H,e as O,h as E,f as V,g as q,K as W,i as z}from"./index-HOmjZ3KE.js";import{e as K}from"./edit-iaQC2oZw.js";import{s as Q,o as X,a as G}from"./zod-BfLuoEp2.js";function J({showIndicator:e,options:r=[],className:l,classNamePrefix:d,value:p,onChange:i,placeholder:s="Select...",isLoading:c,maxheight:u,position:o="auto",...m}){const{isMulti:t}={...m},x=f=>{i(t?f==null?void 0:f.map(C=>C):f)},g=f=>{const{data:C}=f,b=N.useRef(null),[S,R]=N.useState(!1);return N.useEffect(()=>{b.current&&R(b.current.offsetWidth<b.current.scrollWidth)},[C.label]),a.jsxs($.Option,{...f,children:[a.jsx("div",{ref:b,"data-tooltip-id":`tooltip-${C.value}`,"data-tooltip-content":S?C.label:"",style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:C.label}),S&&a.jsx(v,{id:`tooltip-${C.value}`,place:"top"})]})};return a.jsx(F,{menuPlacement:o,maxMenuHeight:u,isLoading:c,classNamePrefix:d,value:p,onChange:x,className:`${l} ${t?"multiple-select":""} react-select-container p-1`,placeholder:s,options:r,isClearable:!0,styles:{menuPortal:f=>({...f,zIndex:9999})},menuPortalTarget:document.body,components:{...!e&&{DropdownIndicator:()=>null,IndicatorSeparator:()=>null},Option:g},...m})}const T=[{id:"1",name:"Role A"},{id:"2",name:"Role B"},{id:"3",name:"Role C"},{id:"4",name:"Role D"},{id:"5",name:"Role E"},{id:"6",name:"Role F"}],U=X({name:G().nonempty("Name is required").max(20,"Name must be 20 characters or less"),roleId:G().nonempty("Role is required")});function _({showModal:e,closeModal:r,onRefreshDesignation:l}){const{register:d,handleSubmit:p,formState:{errors:i},setValue:s,reset:c,watch:u}=Y({resolver:Q(U),defaultValues:{name:"",roleId:""}}),{postData:o,patchData:m,isLoading:t,getAllRole:x,roles:g}=B(D=>D),f=u("roleId");N.useEffect(()=>{},[]),N.useEffect(()=>{var n;const D=T;e!=null&&e.id&&((D==null?void 0:D.length)||0)>0?(s("name",(e==null?void 0:e.roleName)||(e==null?void 0:e.name)||""),s("roleId",String((e==null?void 0:e.roleId)||((n=e==null?void 0:e.role)==null?void 0:n.id)||(e==null?void 0:e.roleId)||""))):e!=null&&e.id||c()},[e==null?void 0:e.id,g,c,s]);const C=N.useMemo(()=>T.map(n=>({label:n.name,value:String(n.id)})),[g]),b=D=>{{l==null||l(),r==null||r();return}},S=()=>a.jsxs(a.Fragment,{children:[a.jsx("h4",{className:"modal-title",children:e!=null&&e.id?"Edit Designation":"Add Designation"}),a.jsx("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:r})]}),R=()=>a.jsx("div",{className:"modal-body",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-sm-6",children:a.jsxs("div",{className:"form-group forms-custom",children:[a.jsxs("label",{htmlFor:"roleId",className:"label",children:["Select Role",a.jsx("span",{className:"text-danger",children:"*"})]}),a.jsx(J,{options:C,value:C.find(D=>D.value===String(f||""))||null,onChange:D=>{s("roleId",(D==null?void 0:D.value)||"")},placeholder:"Select Role",showIndicator:!1,className:"form-select form-control"}),i.roleId&&a.jsx("span",{className:"error",children:i.roleId.message})]})}),a.jsx("div",{className:"col-sm-6",children:a.jsxs("div",{className:"form-group forms-custom",children:[a.jsxs("label",{htmlFor:"name",className:"label",children:["Designation Name",a.jsx("span",{className:"text-danger",children:"*"})]}),a.jsx("input",{type:"text",id:"name",className:"form-control",autoComplete:"off",maxLength:20,placeholder:"Enter designation name",...d("name")}),i.name&&a.jsx("span",{className:"error",children:i.name.message})]})})]})}),j=()=>a.jsxs("div",{className:"modal-footer bottom-btn-sec",children:[a.jsx("button",{type:"button",className:"btn btn-cancel",onClick:r,children:"Cancel"}),a.jsx("button",{type:"button",className:"btn btn-submit",disabled:!1,onClick:p(b),children:"Save"})]});return a.jsx(Z,{className:"modal fade category-modal show",dialgName:"modal-dialog-scrollable",show:!!e,closeModal:r,body:R(),header:S(),footer:j(),isLoading:!1})}const M=e=>h.post("/counter",e),w=(e,r)=>h.put(`/counter/${e}`,r),ee=e=>h.get("/counter",{params:e}),te=()=>h.get("/counter/all-centers"),ae=e=>h.delete(`/counter/${e}`),se=e=>h.get(`/counter/all-counters/${e}`),L={postData:M,patchData:w,getData:ee,deleteData:ae,getAllCenter:te,getAllCounter:se},ne=P(e=>({isLoading:!1,isLoadingGet:!1,isLoadingDelete:!1,errorMessage:"",successMessage:"",designationData:null,roles:[],designations:[],postData:async(r,l)=>{var d,p,i,s,c,u,o,m;try{e({isLoading:!0});const{data:t}=await L.postData(r),{success:x}=A.getState();x(((p=(d=t==null?void 0:t.response)==null?void 0:d.data)==null?void 0:p.message)??(t==null?void 0:t.message)),e({successMessage:((s=(i=t==null?void 0:t.response)==null?void 0:i.data)==null?void 0:s.message)??(t==null?void 0:t.message),isLoading:!1}),l&l()}catch(t){const{error:x}=A.getState();e({errorMessage:((u=(c=t==null?void 0:t.response)==null?void 0:c.data)==null?void 0:u.message)??(t==null?void 0:t.message),isLoading:!1}),x(((m=(o=t==null?void 0:t.response)==null?void 0:o.data)==null?void 0:m.message)??t.message)}},patchData:async(r,l)=>{var d,p,i,s,c,u,o,m;try{e({isLoading:!0});const{id:t,...x}=r,{data:g}=await L.patchData(t,x),{success:f}=A.getState();f(((p=(d=g==null?void 0:g.response)==null?void 0:d.data)==null?void 0:p.message)??(g==null?void 0:g.message)),e({successMessage:((s=(i=g==null?void 0:g.response)==null?void 0:i.data)==null?void 0:s.message)??(g==null?void 0:g.message),isLoading:!1}),l&l()}catch(t){const{error:x}=A.getState();e({errorMessage:((u=(c=t==null?void 0:t.response)==null?void 0:c.data)==null?void 0:u.message)??(t==null?void 0:t.message),isLoading:!1}),x(((m=(o=t==null?void 0:t.response)==null?void 0:o.data)==null?void 0:m.message)??t.message)}},getData:async r=>{var l,d,p,i;try{e({isLoadingGet:!0,successMessage:""});const{data:s}=await L.getData(r),c=s;e({designationData:c==null?void 0:c.data,isLoadingGet:!1})}catch(s){const{error:c}=A.getState();e({errorMessage:((d=(l=s==null?void 0:s.response)==null?void 0:l.data)==null?void 0:d.message)??(s==null?void 0:s.message),isLoadingGet:!1}),c(((i=(p=s==null?void 0:s.response)==null?void 0:p.data)==null?void 0:i.message)??s.message)}},getAllCenter:async()=>{var r;try{e({isLoadingGet:!0});const{data:l}=await L.getAllCenter(),d=l;e({roles:(r=d==null?void 0:d.data)==null?void 0:r.data,isLoadingGet:!1})}catch{e({isLoadingGet:!1})}},getAllCounter:async r=>{try{e({isLoadingGet:!0});const{data:{data:l}}=await L.getAllCounter(r);e({designations:l==null?void 0:l.data,isLoadingGet:!1})}catch{e({isLoadingGet:!1})}},clearCounterData:()=>{e({designations:[],errorMessage:"",successMessage:""})},deleteData:async(r,l)=>{var d,p,i,s,c,u;try{e({isLoadingDelete:!0});const{data:o}=await L.deleteData(r),m=o;e({designationData:m==null?void 0:m.data,successMessage:((p=(d=o==null?void 0:o.response)==null?void 0:d.data)==null?void 0:p.message)??(o==null?void 0:o.message),isLoadingDelete:!1}),l&l()}catch(o){const{error:m}=A.getState();e({errorMessage:((s=(i=o==null?void 0:o.response)==null?void 0:i.data)==null?void 0:s.message)??(o==null?void 0:o.message),isLoadingDelete:!1}),m(((u=(c=o==null?void 0:o.response)==null?void 0:c.data)==null?void 0:u.message)??o.message)}}})),re=()=>{const{getData:e,designationData:r,isLoadingGet:l,deleteData:d,isLoadingDelete:p}=ne(n=>n),[i,s]=N.useState(!1),[c,u]=N.useState(!1),o={search:"",page:1,limit:10,fromDate:null,toDate:null,sortBy:"createdAt",sortOrder:"DESC",isExcelExport:"false"},[m,t]=N.useState(o),x={total:6,data:[{id:1,roleName:"Role A",designationName:"Designation A",createdAt:"2025-01-12T10:00:00Z"},{id:2,roleName:"Role B",designationName:"Designation B",createdAt:"2025-01-15T11:20:00Z"},{id:3,roleName:"Role C",designationName:"Designation 1",createdAt:"2025-02-02T09:10:00Z"},{id:4,roleName:"Role D",designationName:"Designation 3",createdAt:"2025-02-20T14:45:00Z"},{id:5,roleName:"Role E",designationName:"Designation X",createdAt:"2025-03-01T08:35:00Z"},{id:6,roleName:"Role F",designationName:"Designation Z",createdAt:"2025-03-10T16:05:00Z"}]},g=()=>{u(!1),s(!1)};N.useEffect(()=>{},[m]);const f=n=>{t(y=>({...y,sortBy:n,sortOrder:y.sortOrder==="ASC"?"DESC":"ASC"}))},C=n=>a.jsxs(a.Fragment,{children:[a.jsx(v,{id:"edit",place:"bottom",content:"Edit",style:{backgroundColor:"#051a53"}}),a.jsx(v,{id:"delete",place:"bottom",content:"Delete",style:{backgroundColor:"#051a53"}}),a.jsx("img",{src:K,alt:"edit","data-tooltip-id":"edit",onClick:()=>u(n)}),a.jsx("img",{src:z,alt:"delete","data-tooltip-id":"delete",onClick:()=>s(n)})]}),b=[{name:"Role Name",selector:"roleName",contentClass:"user-pic",cell:n=>a.jsx("span",{children:(n==null?void 0:n.roleName)||"-"}),sort:!0},{name:"Designation",selector:"designationName",contentClass:"user-pic",cell:n=>a.jsx("span",{children:(n==null?void 0:n.designationName)||"-"})},{name:"Created Date",selector:"createdAt",cell:n=>a.jsx("span",{children:W(n==null?void 0:n.createdAt)}),sort:!0},{name:"Action",disableViewClick:!0,contentClass:"action-wrap",thclass:"actions-edit employee-actn-edit",cell:n=>C(n)}],S=N.useMemo(()=>H.debounce(n=>{t(y=>({...y,search:n,page:1}))},500),[]),R=()=>{{s(!1);return}},j=x;return a.jsxs(a.Fragment,{children:[a.jsx(O,{addButton:{name:"Add Item",type:"button",action:()=>u(!0)},hideFilter:!0,submitFilter:n=>{const{fromDate:y,toDate:I,...k}=n;t({...m,...k,fromDate:y?E(y).format("YYYY-MM-DD"):null,toDate:I?E(I).format("YYYY-MM-DD"):null,page:1})},clearOptions:()=>t(o),onSearch:S}),a.jsx(V,{pagination:{currentPage:m.page,limit:m.limit},count:(j==null?void 0:j.total)||0,columns:b,data:(j==null?void 0:j.data)||[],isLoading:!1,onPageChange:n=>t({...m,page:n}),setLimit:n=>t({...m,limit:n}),onSortChange:f,wrapClasses:"inventory-table-wrap"}),c&&a.jsx(_,{showModal:c,closeModal:()=>u(!1),onRefreshDesignation:g}),i&&a.jsx(q,{isDelete:!0,isLoading:!1,showModal:i,closeModal:()=>s(!1),message:`Are you sure you want to delete this ${(i==null?void 0:i.designationName)||(i==null?void 0:i.name)||""}?`,onCancel:()=>s(!1),onSubmit:R})]})};export{re as default};
