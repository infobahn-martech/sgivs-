import{j as e,S as v,G as j,y as F,z as x,r as g,F as b,a as p}from"./index-jAqGMMo8.js";const D=[{label:"Days",value:"Days"},{label:"Hours",value:"Hours"}],y=c=>{const o={};return Object.keys(c).forEach(s=>{if(["",null,void 0].includes(c[s])&&s!=="notification")return o[s]="Deadline and Interval is required"}),o},w=({children:c="Submit",onClick:o,isLoading:s})=>e.jsx("button",{onClick:o,type:"submit",className:"btn submit",children:s?e.jsx(v,{size:"sm",as:"span",animation:"border",variant:"light","aria-hidden":"true",className:"custom-spinner"}):c}),S=c=>j.post("/settings",c),R=()=>j.get("/settings"),N={postData:S,getData:R},C=F(c=>({isLoading:!1,isLoadingGet:!1,errorMessage:"",successMessage:"",userData:null,postData:async o=>{var s,u,l,d,n,i,r,h;try{c({isLoading:!0});const{data:a}=await N.postData(o),{success:t}=x.getState();t(((u=(s=a==null?void 0:a.response)==null?void 0:s.data)==null?void 0:u.message)??(a==null?void 0:a.message)),c({successMessage:((d=(l=a==null?void 0:a.response)==null?void 0:l.data)==null?void 0:d.message)??(a==null?void 0:a.message),isLoading:!1})}catch(a){const{error:t}=x.getState();c({errorMessage:((i=(n=a==null?void 0:a.response)==null?void 0:n.data)==null?void 0:i.message)??(a==null?void 0:a.message),isLoading:!1}),t(((h=(r=a==null?void 0:a.response)==null?void 0:r.data)==null?void 0:h.message)??a.message)}},getData:async()=>{var o,s,u,l,d,n;try{c({isLoadingGet:!0});const{data:i}=await N.getData();c({userData:i,successMessage:((s=(o=i==null?void 0:i.response)==null?void 0:o.data)==null?void 0:s.message)??(i==null?void 0:i.message),isLoadingGet:!1})}catch(i){const{error:r}=x.getState();c({errorMessage:((l=(u=i==null?void 0:i.response)==null?void 0:u.data)==null?void 0:l.message)??(i==null?void 0:i.message),isLoadingGet:!1}),r(((n=(d=i==null?void 0:i.response)==null?void 0:d.data)==null?void 0:n.message)??i.message)}}})),U=()=>{const{postData:c,isLoading:o,userData:s,getData:u}=C(t=>t);console.log("userData",s);const[l,d]=g.useState({itemReturnDeadline:"",itemReturnDeadlineUnit:"",thuFriDeadline:"",thuFriDeadlineUnit:"",isNotificationOn:!0,transactionFee:""}),[n,i]=g.useState({});g.useEffect(()=>{u()},[]),g.useEffect(()=>{var t;s!=null&&s.data&&d({itemReturnDeadline:s.data.isItemHours===!0?s.data.itemDeadlineHours:s.data.itemDeadlineDays,itemReturnDeadlineUnit:s.data.isItemHours===!0?"Hours":"Days",thuFriDeadline:s.data.isSpecialHours===!0?s.data.specialDeadlineHours:s.data.specialDeadlineDays,thuFriDeadlineUnit:s.data.isSpecialHours===!0?"Hours":"Days",isNotificationOn:s.data.isNotificationOn,transactionFee:(t=s==null?void 0:s.data)==null?void 0:t.transactionFee})},[s]),console.log("form",l);const r=(t,m)=>{["itemReturnDeadline","thuFriDeadline","transactionFee"].includes(m)&&!/^\d*\.?\d*$/.test(t)||(i(f=>({...f,[m]:""})),d(f=>({...f,[m]:t})))},h=()=>{var m;const t=y(l);i(t),(m=Object.entries(t))!=null&&m.length||c(l)},a=t=>e.jsx("span",{className:"text-danger",children:t});return e.jsx("div",{class:"inner-scroll-outer settings",children:e.jsxs("div",{className:"settings-wrap",children:[e.jsxs("div",{className:"head-wrap",children:[e.jsx("img",{src:b,alt:"alert-icon",className:"img"}),e.jsx("span",{children:"Settings"})]}),e.jsx("div",{className:"settings-content-wrap",children:e.jsxs("div",{children:[e.jsxs("div",{className:"fields-outer-wrap",children:[e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-md-12",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",htmlFor:"",children:"Item Return Deadline"}),e.jsxs("div",{className:"hour-days-wrap",children:[e.jsx("input",{type:"text",className:"form-control",value:l.itemReturnDeadline,onChange:t=>r(t.target.value,"itemReturnDeadline")}),e.jsx(p,{classNamePrefix:"react-select",className:"select",options:D,value:l.itemReturnDeadlineUnit,onChange:t=>r(t.target.value,"itemReturnDeadlineUnit")})]}),a((n==null?void 0:n.itemReturnDeadline)??(n==null?void 0:n.itemReturnDeadlineUnit))]})})}),e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-md-12",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",htmlFor:"",children:"Thu/Fri Deadline"}),e.jsxs("div",{className:"hour-days-wrap",children:[e.jsx("input",{type:"text",className:"form-control",value:l.thuFriDeadline,onChange:t=>r(t.target.value,"thuFriDeadline")}),e.jsx(p,{classNamePrefix:"react-select",className:"select",options:D,value:l.thuFriDeadlineUnit,onChange:t=>r(t.target.value,"thuFriDeadlineUnit")})]}),a((n==null?void 0:n.thuFriDeadline)??(n==null?void 0:n.thuFriDeadlineUnit))]})})}),e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-md-12",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",htmlFor:"",children:"EZ Pass Transaction Fee"}),e.jsx("div",{className:"hour-days-wrap",children:e.jsx("input",{type:"text",className:"form-control",value:l.transactionFee,onChange:t=>r(t.target.value,"transactionFee")})}),a((n==null?void 0:n.transactionFee)??(n==null?void 0:n.transactionFee))]})})}),e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"form-group form-group-last",children:[e.jsx("label",{className:"form-label",htmlFor:"",children:"Auto-send missed deadline notifications"}),e.jsxs("div",{className:"form-switch",children:[e.jsx("input",{className:"form-check-input",type:"checkbox",id:"flexSwitchCheckDefault",checked:l.isNotificationOn,onChange:()=>r(!l.isNotificationOn,"isNotificationOn")}),e.jsx("label",{className:"form-check-label",htmlFor:"flexSwitchCheckDefault",children:"On / Off"})]})]})})})]}),e.jsxs("div",{className:"settng-footer-wrap",children:[e.jsx("button",{className:"btn clear",onClick:()=>{d({itemReturnDeadline:"",itemReturnDeadlineUnit:"",thuFriDeadline:"",thuFriDeadlineUnit:"",isNotificationOn:!0}),i({})},children:"Clear"}),e.jsx(w,{isLoading:o,onClick:()=>h()})]})]})})]})})};export{U as default};
