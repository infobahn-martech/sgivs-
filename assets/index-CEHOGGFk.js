import{G as C,y as V,z as N,u as Y,s as q,r as f,j as a,C as Z,o as B,V as P,c as L,a as _,l as $,k as H,h as E,m as z,n as J,O as K,M as I,q as Q,p as R}from"./index-B6NNw_D1.js";const U=e=>C.post("/optional-service",e),W=(e,o)=>C.put(`/optional-service/${e}`,o),X=e=>C.get("/optional-service",{params:e}),M=()=>C.get("/optional-service/all-optional-services"),w=e=>C.delete(`/optional-service/${e}`),j={postData:U,patchData:W,getData:X,deleteData:w,getAllOptionalService:M},G=V(e=>({isLoading:!1,isLoadingGet:!1,isLoadingDelete:!1,errorMessage:"",successMessage:"",optionalServiceData:null,optionalServices:[],postData:async(o,c)=>{var m,u,n,i,l,g,r,d;try{e({isLoading:!0});const{data:s}=await j.postData(o),{success:S}=N.getState();S(((u=(m=s==null?void 0:s.response)==null?void 0:m.data)==null?void 0:u.message)??(s==null?void 0:s.message)),e({successMessage:((i=(n=s==null?void 0:s.response)==null?void 0:n.data)==null?void 0:i.message)??(s==null?void 0:s.message),isLoading:!1}),c&c()}catch(s){const{error:S}=N.getState();e({errorMessage:((g=(l=s==null?void 0:s.response)==null?void 0:l.data)==null?void 0:g.message)??(s==null?void 0:s.message),isLoading:!1}),S(((d=(r=s==null?void 0:s.response)==null?void 0:r.data)==null?void 0:d.message)??s.message)}},patchData:async(o,c)=>{var m,u,n,i,l,g,r,d;try{e({isLoading:!0});const{id:s,...S}=o,{data:p}=await j.patchData(s,S),{success:D}=N.getState();D(((u=(m=p==null?void 0:p.response)==null?void 0:m.data)==null?void 0:u.message)??(p==null?void 0:p.message)),e({successMessage:((i=(n=p==null?void 0:p.response)==null?void 0:n.data)==null?void 0:i.message)??(p==null?void 0:p.message),isLoading:!1}),c&c()}catch(s){const{error:S}=N.getState();e({errorMessage:((g=(l=s==null?void 0:s.response)==null?void 0:l.data)==null?void 0:g.message)??(s==null?void 0:s.message),isLoading:!1}),S(((d=(r=s==null?void 0:s.response)==null?void 0:r.data)==null?void 0:d.message)??s.message)}},getData:async o=>{var c,m,u,n;try{e({isLoadingGet:!0,successMessage:""});const{data:i}=await j.getData(o),l=i;e({optionalServiceData:l==null?void 0:l.data,isLoadingGet:!1})}catch(i){const{error:l}=N.getState();e({errorMessage:((m=(c=i==null?void 0:i.response)==null?void 0:c.data)==null?void 0:m.message)??(i==null?void 0:i.message),isLoadingGet:!1}),l(((n=(u=i==null?void 0:i.response)==null?void 0:u.data)==null?void 0:n.message)??i.message)}},getAllCenter:async()=>{var o;try{e({isLoadingGet:!0});const{data:c}=await j.getAllCenter(),m=c;e({optionalServices:(o=m==null?void 0:m.data)==null?void 0:o.data,isLoadingGet:!1})}catch{e({isLoadingGet:!1})}},getAllCounter:async o=>{try{e({isLoadingGet:!0});const{data:{data:c}}=await j.getAllCounter(o);e({optionalServices:c==null?void 0:c.data,isLoadingGet:!1})}catch{e({isLoadingGet:!1})}},clearCounterData:()=>{e({optionalServices:[],errorMessage:"",successMessage:""})},deleteData:async(o,c)=>{var m,u,n,i,l,g;try{e({isLoadingDelete:!0});const{data:r}=await j.deleteData(o),d=r;e({optionalServiceData:d==null?void 0:d.data,successMessage:((u=(m=r==null?void 0:r.response)==null?void 0:m.data)==null?void 0:u.message)??(r==null?void 0:r.message),isLoadingDelete:!1}),c&c()}catch(r){const{error:d}=N.getState();e({errorMessage:((i=(n=r==null?void 0:r.response)==null?void 0:n.data)==null?void 0:i.message)??(r==null?void 0:r.message),isLoadingDelete:!1}),d(((g=(l=r==null?void 0:r.response)==null?void 0:l.data)==null?void 0:g.message)??r.message)}}})),O=[{id:"1",servicesTypeName:"Attestation"},{id:"2",servicesTypeName:"Visa"},{id:"3",servicesTypeName:"Passport"},{id:"4",servicesTypeName:"OCI"}],ee=B({name:L().nonempty("Name is required").max(20,"Name must be 20 characters or less"),servicesTypeId:L().nonempty("Services Type is required"),serviceFee:P({required_error:"Service Fee is required",invalid_type_error:"Service Fee is required"}).refine(e=>!Number.isNaN(e),{message:"Service Fee is required"})});function se({showModal:e,closeModal:o,onRefreshOptionalService:c}){const{register:m,handleSubmit:u,formState:{errors:n},setValue:i,reset:l,watch:g}=Y({resolver:q(ee),defaultValues:{name:"",servicesTypeId:"",serviceFee:""}}),{postData:r,patchData:d,isLoading:s,getAllOptionalService:S,optionalServices:p}=G(v=>v),D=g("servicesTypeId");f.useEffect(()=>{},[]);const b=f.useMemo(()=>O.map(t=>({label:t.servicesTypeName,value:String(t.id)})),[p]);f.useEffect(()=>{var t;const v=O;e!=null&&e.id&&((v==null?void 0:v.length)||0)>0?(i("name",(e==null?void 0:e.optionalServiceName)||(e==null?void 0:e.name)||""),i("servicesTypeId",String((e==null?void 0:e.servicesTypeId)||((t=e==null?void 0:e.servicesType)==null?void 0:t.id)||""),{shouldValidate:!0}),i("serviceFee",(e==null?void 0:e.serviceFee)??"",{shouldValidate:!0})):e!=null&&e.id||l()},[e==null?void 0:e.id,p,l,i]);const T=v=>{{c==null||c(),o==null||o();return}},F=()=>a.jsxs(a.Fragment,{children:[a.jsx("h4",{className:"modal-title",children:e!=null&&e.id?"Edit Optional Service":"Add Optional Service"}),a.jsx("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:o})]}),A=()=>a.jsx("div",{className:"modal-body",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-sm-6",children:a.jsxs("div",{className:"form-group forms-custom",children:[a.jsxs("label",{htmlFor:"servicesTypeId",className:"label",children:["Select Services Type",a.jsx("span",{className:"text-danger",children:"*"})]}),a.jsx(_,{options:b,value:b.find(v=>v.value===String(D||""))||null,onChange:v=>{i("servicesTypeId",(v==null?void 0:v.value)||"",{shouldValidate:!0})},placeholder:"Select Services Type",showIndicator:!1,className:"form-control"}),n.servicesTypeId&&a.jsx("span",{className:"error",children:n.servicesTypeId.message})]})}),a.jsx("div",{className:"col-sm-6",children:a.jsxs("div",{className:"form-group forms-custom",children:[a.jsxs("label",{htmlFor:"name",className:"label",children:["Optional Service Name",a.jsx("span",{className:"text-danger",children:"*"})]}),a.jsx("input",{type:"text",id:"name",className:"form-control",autoComplete:"off",maxLength:20,placeholder:"Enter optional service name",...m("name")}),n.name&&a.jsx("span",{className:"error",children:n.name.message})]})}),a.jsx("div",{className:"col-sm-6",children:a.jsxs("div",{className:"form-group forms-custom",children:[a.jsxs("label",{htmlFor:"serviceFee",className:"label",children:["Service Fee",a.jsx("span",{className:"text-danger",children:"*"})]}),a.jsx("input",{type:"number",id:"serviceFee",className:"form-control",placeholder:"Enter service fee",...m("serviceFee",{valueAsNumber:!0})}),n.serviceFee&&a.jsx("span",{className:"error",children:n.serviceFee.message})]})})]})}),y=()=>a.jsxs("div",{className:"modal-footer bottom-btn-sec",children:[a.jsx("button",{type:"button",className:"btn btn-cancel",onClick:o,children:"Cancel"}),a.jsx("button",{type:"button",className:"btn btn-submit",disabled:!1,onClick:u(T),children:"Save"})]});return a.jsx(Z,{className:"modal fade category-modal show",dialgName:"modal-dialog-scrollable",show:!!e,closeModal:o,body:A(),header:F(),footer:y(),isLoading:!1})}const te=()=>{const{getData:e,optionalServiceData:o,isLoadingGet:c,deleteData:m,isLoadingDelete:u}=G(t=>t),[n,i]=f.useState(!1),[l,g]=f.useState(!1),r={search:"",page:1,limit:10,fromDate:null,toDate:null,sortBy:"createdAt",sortOrder:"DESC",isExcelExport:"false"},[d,s]=f.useState(r),S={total:6,data:[{id:1,servicesTypeName:"Attestation",name:"Service A",serviceFee:100,createdAt:"2025-01-12T10:00:00Z"},{id:2,servicesTypeName:"Visa",name:"Service B",serviceFee:200,createdAt:"2025-01-15T11:20:00Z"},{id:3,servicesTypeName:"Passport",name:"Service C",serviceFee:300,createdAt:"2025-02-02T09:10:00Z"},{id:4,servicesTypeName:"OCI",name:"Service D",serviceFee:400,createdAt:"2025-02-20T14:45:00Z"},{id:5,servicesTypeName:"Ajman Center",optionalServiceName:"Service E",serviceFee:500,createdAt:"2025-03-01T08:35:00Z"},{id:6,servicesTypeName:"Fujairah Center",name:"Service F",optionalServiceName:"Service F",serviceFee:600,createdAt:"2025-03-10T16:05:00Z"}]},p=()=>{g(!1),i(!1)};f.useEffect(()=>{},[d]);const D=t=>{s(x=>({...x,sortBy:t,sortOrder:x.sortOrder==="ASC"?"DESC":"ASC"}))},b=t=>a.jsxs(a.Fragment,{children:[a.jsx(I,{id:"edit",place:"bottom",content:"Edit",style:{backgroundColor:"#051a53"}}),a.jsx(I,{id:"delete",place:"bottom",content:"Delete",style:{backgroundColor:"#051a53"}}),a.jsx("img",{src:Q,alt:"edit","data-tooltip-id":"edit",onClick:()=>g(t)}),a.jsx("img",{src:R,alt:"delete","data-tooltip-id":"delete",onClick:()=>i(t)})]}),T=[{name:"Services Type",selector:"servicesTypeName",contentClass:"user-pic",cell:t=>a.jsx("span",{children:(t==null?void 0:t.servicesTypeName)||"-"}),sort:!0},{name:"Optional Service",selector:"optionalServiceName",contentClass:"user-pic",cell:t=>a.jsx("span",{children:(t==null?void 0:t.optionalServiceName)||"-"}),sort:!0},{name:"Service Fee",selector:"serviceFee",contentClass:"user-pic",cell:t=>a.jsx("span",{children:(t==null?void 0:t.serviceFee)||"-"}),sort:!0},{name:"Created Date",selector:"createdAt",cell:t=>a.jsx("span",{children:K(t==null?void 0:t.createdAt)}),sort:!0},{name:"Action",disableViewClick:!0,contentClass:"action-wrap",thclass:"actions-edit employee-actn-edit",cell:t=>b(t)}],F=f.useMemo(()=>$.debounce(t=>{s(x=>({...x,search:t,page:1}))},500),[]),A=()=>{{i(!1);return}},y=S;return a.jsxs(a.Fragment,{children:[a.jsx(H,{addButton:{name:"Add Item",type:"button",action:()=>g(!0)},hideFilter:!0,submitFilter:t=>{const{fromDate:x,toDate:h,...k}=t;s({...d,...k,fromDate:x?E(x).format("YYYY-MM-DD"):null,toDate:h?E(h).format("YYYY-MM-DD"):null,page:1})},clearOptions:()=>s(r),onSearch:F}),a.jsx(z,{pagination:{currentPage:d.page,limit:d.limit},count:(y==null?void 0:y.total)||0,columns:T,data:(y==null?void 0:y.data)||[],isLoading:!1,onPageChange:t=>s({...d,page:t}),setLimit:t=>s({...d,limit:t}),onSortChange:D,wrapClasses:"inventory-table-wrap"}),l&&a.jsx(se,{showModal:l,closeModal:()=>g(!1),onRefreshOptionalService:p}),n&&a.jsx(J,{isDelete:!0,isLoading:!1,showModal:n,closeModal:()=>i(!1),message:`Are you sure you want to delete this ${(n==null?void 0:n.optionalServiceName)||""}?`,onCancel:()=>i(!1),onSubmit:A})]})};export{te as default};
