import{x as O,T as F,y as C,j as t,O as P,r as x,Q as Y,M as L,b as Z,n as V,l as B,e as $,h as A,f as H,g as q,K as R,i as W}from"./index-HOmjZ3KE.js";import{e as z}from"./edit-iaQC2oZw.js";import{s as K,o as Q,a as I}from"./zod-BfLuoEp2.js";const k=O(e=>({isLoading:!1,isLoadingGet:!1,isLoadingDelete:!1,errorMessage:"",successMessage:"",serviceData:null,serviceTypes:[],postData:async(i,o)=>{var d,u,m,a,r,p,n,l;try{e({isLoading:!0});const{data:s}=await serviceService.postData(i),{success:f}=C.getState();f(((u=(d=s==null?void 0:s.response)==null?void 0:d.data)==null?void 0:u.message)??(s==null?void 0:s.message)),e({successMessage:((a=(m=s==null?void 0:s.response)==null?void 0:m.data)==null?void 0:a.message)??(s==null?void 0:s.message),isLoading:!1}),o&o()}catch(s){const{error:f}=C.getState();e({errorMessage:((p=(r=s==null?void 0:s.response)==null?void 0:r.data)==null?void 0:p.message)??(s==null?void 0:s.message),isLoading:!1}),f(((l=(n=s==null?void 0:s.response)==null?void 0:n.data)==null?void 0:l.message)??s.message)}},patchData:async(i,o)=>{var d,u,m,a,r,p,n,l;try{e({isLoading:!0});const{id:s,...f}=i,{data:g}=await serviceService.patchData(s,f),{success:v}=C.getState();v(((u=(d=g==null?void 0:g.response)==null?void 0:d.data)==null?void 0:u.message)??(g==null?void 0:g.message)),e({successMessage:((a=(m=g==null?void 0:g.response)==null?void 0:m.data)==null?void 0:a.message)??(g==null?void 0:g.message),isLoading:!1}),o&o()}catch(s){const{error:f}=C.getState();e({errorMessage:((p=(r=s==null?void 0:s.response)==null?void 0:r.data)==null?void 0:p.message)??(s==null?void 0:s.message),isLoading:!1}),f(((l=(n=s==null?void 0:s.response)==null?void 0:n.data)==null?void 0:l.message)??s.message)}},getData:async i=>{var o,d,u,m;try{e({isLoadingGet:!0,successMessage:""});const{data:a}=await serviceService.getData(i),r=a;e({serviceData:r==null?void 0:r.data,isLoadingGet:!1})}catch(a){const{error:r}=C.getState();e({errorMessage:((d=(o=a==null?void 0:a.response)==null?void 0:o.data)==null?void 0:d.message)??(a==null?void 0:a.message),isLoadingGet:!1}),r(((m=(u=a==null?void 0:a.response)==null?void 0:u.data)==null?void 0:m.message)??a.message)}},getAllServiceType:async()=>{var i;try{e({isLoadingGet:!0});const{data:o}=await serviceService.getAllServiceType(),d=o;e({serviceTypes:(i=d==null?void 0:d.data)==null?void 0:i.data,isLoadingGet:!1})}catch{e({isLoadingGet:!1})}},getAllServiceType:async()=>{try{e({isLoadingGet:!0});const{data:{data:i}}=await serviceService.getAllServiceType();e({serviceTypes:i==null?void 0:i.data,isLoadingGet:!1})}catch{e({isLoadingGet:!1})}},clearServiceData:()=>{e({serviceTypes:[],errorMessage:"",successMessage:""})},deleteData:async(i,o)=>{var d,u,m,a,r,p;try{e({isLoadingDelete:!0});const{data:n}=await F.deleteData(i),l=n;e({counterData:l==null?void 0:l.data,successMessage:((u=(d=n==null?void 0:n.response)==null?void 0:d.data)==null?void 0:u.message)??(n==null?void 0:n.message),isLoadingDelete:!1}),o&o()}catch(n){const{error:l}=C.getState();e({errorMessage:((a=(m=n==null?void 0:n.response)==null?void 0:m.data)==null?void 0:a.message)??(n==null?void 0:n.message),isLoadingDelete:!1}),l(((p=(r=n==null?void 0:n.response)==null?void 0:r.data)==null?void 0:p.message)??n.message)}}}));function X({showIndicator:e,options:i=[],className:o,classNamePrefix:d,value:u,onChange:m,placeholder:a="Select...",isLoading:r,maxheight:p,position:n="auto",...l}){const{isMulti:s}={...l},f=v=>{m(s?v==null?void 0:v.map(S=>S):v)},g=v=>{const{data:S}=v,T=x.useRef(null),[D,N]=x.useState(!1);return x.useEffect(()=>{T.current&&N(T.current.offsetWidth<T.current.scrollWidth)},[S.label]),t.jsxs(Y.Option,{...v,children:[t.jsx("div",{ref:T,"data-tooltip-id":`tooltip-${S.value}`,"data-tooltip-content":D?S.label:"",style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:S.label}),D&&t.jsx(L,{id:`tooltip-${S.value}`,place:"top"})]})};return t.jsx(P,{menuPlacement:n,maxMenuHeight:p,isLoading:r,classNamePrefix:d,value:u,onChange:f,className:`${o} ${s?"multiple-select":""} react-select-container p-1`,placeholder:a,options:i,isClearable:!0,styles:{menuPortal:v=>({...v,zIndex:9999})},menuPortalTarget:document.body,components:{...!e&&{DropdownIndicator:()=>null,IndicatorSeparator:()=>null},Option:g},...l})}const E=[{id:"1",name:"Attestation"},{id:"2",name:"Visa"},{id:"3",name:"Passport"},{id:"4",name:"OCI"}],J=Q({name:I().nonempty("Name is required").max(20,"Name must be 20 characters or less"),serviceTypeId:I().nonempty("Service Type is required")});function U({showModal:e,closeModal:i,onRefreshService:o}){const{register:d,handleSubmit:u,formState:{errors:m},setValue:a,reset:r,watch:p}=Z({resolver:K(J),defaultValues:{name:"",serviceTypeId:""}}),{postData:n,patchData:l,isLoading:s,getAllServiceType:f,serviceTypes:g}=k(y=>y),v=p("serviceTypeId");x.useEffect(()=>{},[]),x.useEffect(()=>{var c;const y=E;e!=null&&e.id&&((y==null?void 0:y.length)||0)>0?(a("name",(e==null?void 0:e.serviceName)||(e==null?void 0:e.name)||""),a("serviceTypeId",String((e==null?void 0:e.serviceTypeId)||((c=e==null?void 0:e.serviceType)==null?void 0:c.id)||(e==null?void 0:e.serviceTypeId)||""))):e!=null&&e.id||r()},[e==null?void 0:e.id,g,r,a]);const S=x.useMemo(()=>E.map(c=>({label:c.name,value:String(c.id)})),[g]),T=y=>{{o==null||o(),i==null||i();return}},D=()=>t.jsxs(t.Fragment,{children:[t.jsx("h4",{className:"modal-title",children:e!=null&&e.id?"Edit Service":"Add Service"}),t.jsx("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:i})]}),N=()=>t.jsx("div",{className:"modal-body",children:t.jsxs("div",{className:"row",children:[t.jsx("div",{className:"col-sm-6",children:t.jsxs("div",{className:"form-group forms-custom",children:[t.jsxs("label",{htmlFor:"serviceTypeId",className:"label",children:["Select Service Type",t.jsx("span",{className:"text-danger",children:"*"})]}),t.jsx(X,{options:S,value:S.find(y=>y.value===String(v||""))||null,onChange:y=>{a("serviceTypeId",(y==null?void 0:y.value)||"")},placeholder:"Select Service Type",showIndicator:!1,className:"form-select form-control"}),m.serviceTypeId&&t.jsx("span",{className:"error",children:m.serviceTypeId.message})]})}),t.jsx("div",{className:"col-sm-6",children:t.jsxs("div",{className:"form-group forms-custom",children:[t.jsxs("label",{htmlFor:"name",className:"label",children:["Service Name",t.jsx("span",{className:"text-danger",children:"*"})]}),t.jsx("input",{type:"text",id:"name",className:"form-control",autoComplete:"off",maxLength:20,placeholder:"Enter service name",...d("name")}),m.name&&t.jsx("span",{className:"error",children:m.name.message})]})})]})}),b=()=>t.jsxs("div",{className:"modal-footer bottom-btn-sec",children:[t.jsx("button",{type:"button",className:"btn btn-cancel",onClick:i,children:"Cancel"}),t.jsx("button",{type:"button",className:"btn btn-submit",disabled:!1,onClick:u(T),children:"Save"})]});return t.jsx(V,{className:"modal fade category-modal show",dialgName:"modal-dialog-scrollable",show:!!e,closeModal:i,body:N(),header:D(),footer:b(),isLoading:!1})}const ee=()=>{const{getData:e,serviceData:i,isLoadingGet:o,deleteData:d,isLoadingDelete:u}=k(c=>c),[m,a]=x.useState(!1),[r,p]=x.useState(!1),n={search:"",page:1,limit:10,fromDate:null,toDate:null,sortBy:"createdAt",sortOrder:"DESC",isExcelExport:"false"},[l,s]=x.useState(n),f={total:6,data:[{id:1,serviceType:"Attestation",serviceName:"Service A",createdAt:"2025-01-12T10:00:00Z"},{id:2,serviceType:"Visa",serviceName:"Service B",createdAt:"2025-01-15T11:20:00Z"},{id:3,serviceType:"Passport",serviceName:"Service 1",createdAt:"2025-02-02T09:10:00Z"},{id:4,serviceType:"Visa",serviceName:"Service 3",createdAt:"2025-02-20T14:45:00Z"},{id:5,serviceType:"Other",serviceName:"Service X",createdAt:"2025-03-01T08:35:00Z"},{id:6,serviceType:"Other",serviceName:"Service Z",createdAt:"2025-03-10T16:05:00Z"}]},g=()=>{p(!1),a(!1)};x.useEffect(()=>{},[l]);const v=c=>{s(j=>({...j,sortBy:c,sortOrder:j.sortOrder==="ASC"?"DESC":"ASC"}))},S=c=>t.jsxs(t.Fragment,{children:[t.jsx(L,{id:"edit",place:"bottom",content:"Edit",style:{backgroundColor:"#051a53"}}),t.jsx(L,{id:"delete",place:"bottom",content:"Delete",style:{backgroundColor:"#051a53"}}),t.jsx("img",{src:z,alt:"edit","data-tooltip-id":"edit",onClick:()=>p(c)}),t.jsx("img",{src:W,alt:"delete","data-tooltip-id":"delete",onClick:()=>a(c)})]}),T=[{name:"Service Name",selector:"serviceName",contentClass:"user-pic",cell:c=>t.jsx("span",{children:(c==null?void 0:c.serviceName)||"-"})},{name:"Service Type",selector:"serviceType",contentClass:"user-pic",cell:c=>t.jsx("span",{children:(c==null?void 0:c.serviceType)||"-"}),sort:!0},{name:"Created Date",selector:"createdAt",cell:c=>t.jsx("span",{children:R(c==null?void 0:c.createdAt)}),sort:!0},{name:"Action",disableViewClick:!0,contentClass:"action-wrap",thclass:"actions-edit employee-actn-edit",cell:c=>S(c)}],D=x.useMemo(()=>B.debounce(c=>{s(j=>({...j,search:c,page:1}))},500),[]),N=()=>{{a(!1);return}},b=f;return t.jsxs(t.Fragment,{children:[t.jsx($,{addButton:{name:"Add Item",type:"button",action:()=>p(!0)},hideFilter:!0,submitFilter:c=>{const{fromDate:j,toDate:h,...G}=c;s({...l,...G,fromDate:j?A(j).format("YYYY-MM-DD"):null,toDate:h?A(h).format("YYYY-MM-DD"):null,page:1})},clearOptions:()=>s(n),onSearch:D}),t.jsx(H,{pagination:{currentPage:l.page,limit:l.limit},count:(b==null?void 0:b.total)||0,columns:T,data:(b==null?void 0:b.data)||[],isLoading:!1,onPageChange:c=>s({...l,page:c}),setLimit:c=>s({...l,limit:c}),onSortChange:v,wrapClasses:"inventory-table-wrap"}),r&&t.jsx(U,{showModal:r,closeModal:()=>p(!1),onRefreshService:g}),m&&t.jsx(q,{isDelete:!0,isLoading:!1,showModal:m,closeModal:()=>a(!1),message:"Are you sure you want to delete this Service?",onCancel:()=>a(!1),onSubmit:N})]})};export{ee as default};
