import{G as L,y as v,z as F,u as T,s as Y,r as l,j as e,C as G,o as k,c as B,l as R,k as Z,h as N,m as P,n as H,O as K}from"./index-B6NNw_D1.js";const U=t=>L.get("/out-scan",{params:t}),V={getData:U},D=v(t=>({isLoading:!1,isLoadingGet:!1,errorMessage:"",successMessage:"",outScanData:null,getData:async i=>{var m,b,g,c;try{t({isLoadingGet:!0});const{data:s}=await V.getData(i),n=s;t({outScanData:n==null?void 0:n.data,isLoadingGet:!1})}catch(s){const{error:n}=F.getState();t({errorMessage:((b=(m=s==null?void 0:s.response)==null?void 0:m.data)==null?void 0:b.message)??(s==null?void 0:s.message),isLoadingGet:!1}),n(((c=(g=s==null?void 0:s.response)==null?void 0:g.data)==null?void 0:c.message)??s.message)}}})),_=k({applicationNumber:B().nonempty("Application Number is required").max(20,"Application Number must be 10 characters or less")});function q({showModal:t,closeModal:i,onRefreshOutScan:m}){const{register:b,handleSubmit:g,formState:{errors:c},setValue:s,reset:n}=T({resolver:Y(_),defaultValues:{applicationNumber:""}}),{postData:r,patchData:o,isLoading:f}=D(u=>u);l.useEffect(()=>{t!=null&&t.id?s("applicationNumber",(t==null?void 0:t.applicationNumber)||""):n()},[t==null?void 0:t.id]);const S=u=>{t!=null&&t.id?o({id:t.id,...u},()=>{m()}):r(u,()=>{m()}),i()},x=()=>e.jsxs(e.Fragment,{children:[e.jsx("h4",{className:"modal-title",children:t!=null&&t.id?"Edit Out Scan":"Add Out Scan"}),e.jsx("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:i})]}),j=()=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"modal-body custom-scroll",children:e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{htmlFor:"applicationNumber",className:"form-label",children:["Application Number",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"text",id:"applicationNumber",className:"form-control",autoComplete:"off",maxLength:20,...b("applicationNumber")}),c.applicationNumber&&e.jsx("span",{className:"error",children:c.applicationNumber.message})]})})})})}),y=()=>e.jsx(e.Fragment,{children:e.jsxs("div",{className:"modal-footer bottom-btn-sec",children:[e.jsx("button",{type:"button",className:"btn btn-cancel",onClick:i,children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-submit",disabled:f,onClick:g(S),children:f?"Loading...":"Save"})]})});return e.jsx(G,{className:"modal fade category-mgmt-modal show",dialgName:"modal-dialog-scrollable",show:!!t,closeModal:i,body:j(),header:x(),footer:y(),isLoading:!1})}const J=()=>{const{getData:i,outScanData:m,isLoadingGet:b,isLoadingDelete:g}=D(a=>a),[c,s]=l.useState(!1),n={search:"",page:1,limit:10,fromDate:null,toDate:null,sortBy:"date",sortOrder:"DESC",isExcelExport:"false"},[r,o]=l.useState(n),[f,S]=l.useState(!1),[x,j]=l.useState(null),y={total:5,data:[{id:1,date:"2025-01-10T09:30:00Z",center:"Dubai Center",by:"Admin",totalApplication:12},{id:2,date:"2025-02-14T12:15:00Z",center:"Abu Dhabi Center",by:"Operator",totalApplication:7},{id:3,date:"2025-03-05T08:45:00Z",center:"Sharjah Center",by:"Admin",totalApplication:19},{id:4,date:"2025-03-20T10:00:00Z",center:"Ajman Center",by:"Supervisor",totalApplication:5},{id:5,date:"2025-04-02T11:20:00Z",center:"Dubai Center",by:"Admin",totalApplication:9}]};l.useEffect(()=>{},[r,!0,i]);const u=a=>{o(d=>({...d,sortBy:a,sortOrder:d.sortOrder==="ASC"?"DESC":"ASC"}))},h=[{name:"Date",selector:"date",sortable:!0,sortField:"date",cell:a=>e.jsx("span",{children:a!=null&&a.date?K(a==null?void 0:a.date):"-"})},{name:"Center",selector:"center",sortable:!0,sortField:"center"},{name:"By",selector:"by",sortable:!0,sortField:"by"},{name:"Total Application",selector:"totalApplication",sortable:!0,sortField:"totalApplication",cell:a=>e.jsx("span",{children:(a==null?void 0:a.totalApplication)??0})}],C=l.useMemo(()=>R.debounce(a=>{o(d=>({...d,search:a,page:1}))},500),[]);l.useEffect(()=>()=>C.cancel(),[C]);const O=()=>{{s(!1);return}},p=y;return e.jsxs(e.Fragment,{children:[e.jsx(Z,{addButton:{name:"Add Item",type:"button",action:()=>{S(!0),j(null)}},hideFilter:!0,onSearch:C,submitFilter:a=>{const{fromDate:d,toDate:A,...E}=a;o({...r,...E,fromDate:d?N(d).format("YYYY-MM-DD"):null,toDate:A?N(A).format("YYYY-MM-DD"):null,page:1})},clearOptions:()=>o(n)}),e.jsx(P,{pagination:{currentPage:r.page,limit:r.limit},count:(p==null?void 0:p.total)||0,columns:h,data:(p==null?void 0:p.data)||[],isLoading:!1,onPageChange:a=>o({...r,page:a}),setLimit:a=>o({...r,limit:a}),onSortChange:u,wrapClasses:"inventory-table-wrap"}),c&&e.jsx(H,{showModal:c,closeModal:()=>s(!1),isLoading:!1,message:"Are you sure you want to retrieve this record?",onCancel:()=>s(!1),onSubmit:O}),f&&e.jsx(q,{showModal:f,closeModal:()=>S(!1),onRefreshOutScan:()=>i(r),selectedOutScan:x})]})};export{J as default};
