import{j as e,O as L,r as l,Q as Y,M as A,b as Z,d as k,n as P,l as $,e as B,h as v,f as H,g as O,K as V,i as q}from"./index-Cnxfy8I7.js";import{e as W}from"./edit-iaQC2oZw.js";import{s as z,o as G,a as E}from"./zod-iKJYp8Hl.js";function K({showIndicator:n,options:u=[],className:b,classNamePrefix:D,value:h,onChange:a,placeholder:c="Select...",isLoading:f,maxheight:d,position:N="auto",...m}){const{isMulti:o}={...m},y=s=>{a(o?s==null?void 0:s.map(i=>i):s)},g=s=>{const{data:i}=s,p=l.useRef(null),[j,S]=l.useState(!1);return l.useEffect(()=>{p.current&&S(p.current.offsetWidth<p.current.scrollWidth)},[i.label]),e.jsxs(Y.Option,{...s,children:[e.jsx("div",{ref:p,"data-tooltip-id":`tooltip-${i.value}`,"data-tooltip-content":j?i.label:"",style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:i.label}),j&&e.jsx(A,{id:`tooltip-${i.value}`,place:"top"})]})};return e.jsx(L,{menuPlacement:N,maxMenuHeight:d,isLoading:f,classNamePrefix:D,value:h,onChange:y,className:`${b} ${o?"multiple-select":""} react-select-container p-1`,placeholder:c,options:u,isClearable:!0,styles:{menuPortal:s=>({...s,zIndex:9999})},menuPortalTarget:document.body,components:{...!n&&{DropdownIndicator:()=>null,IndicatorSeparator:()=>null},Option:g},...m})}const T=[{id:"1",name:"Dubai Center"},{id:"2",name:"Abu Dhabi Center"},{id:"3",name:"Sharjah Center"},{id:"4",name:"Ajman Center"}],Q=G({name:E().nonempty("Name is required").max(20,"Name must be 20 characters or less"),centerId:E().nonempty("Center is required")});function R({showModal:n,closeModal:u,onRefreshCounter:b}){const{register:D,handleSubmit:h,formState:{errors:a},setValue:c,reset:f,watch:d}=Z({resolver:z(Q),defaultValues:{name:"",centerId:""}}),{postData:N,patchData:m,isLoading:o,getAllCenter:y,centers:g}=k(r=>r),s=d("centerId");l.useEffect(()=>{},[]),l.useEffect(()=>{var t;const r=T;n!=null&&n.id&&((r==null?void 0:r.length)||0)>0?(c("name",(n==null?void 0:n.counterName)||(n==null?void 0:n.name)||""),c("centerId",String((n==null?void 0:n.centerId)||((t=n==null?void 0:n.center)==null?void 0:t.id)||(n==null?void 0:n.centerId)||""))):n!=null&&n.id||f()},[n==null?void 0:n.id,g,f,c]);const i=l.useMemo(()=>T.map(t=>({label:t.name,value:String(t.id)})),[g]),p=r=>{{b==null||b(),u==null||u();return}},j=()=>e.jsxs(e.Fragment,{children:[e.jsx("h4",{className:"modal-title",children:n!=null&&n.id?"Edit Counter":"Add Counter"}),e.jsx("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:u})]}),S=()=>e.jsx("div",{className:"modal-body",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group forms-custom",children:[e.jsxs("label",{htmlFor:"centerId",className:"label",children:["Select Center",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx(K,{options:i,value:i.find(r=>r.value===String(s||""))||null,onChange:r=>{c("centerId",(r==null?void 0:r.value)||"")},placeholder:"Select Center",showIndicator:!1,className:"form-select form-control"}),a.centerId&&e.jsx("span",{className:"error",children:a.centerId.message})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"form-group forms-custom",children:[e.jsxs("label",{htmlFor:"name",className:"label",children:["Counter Name",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"text",id:"name",className:"form-control",autoComplete:"off",maxLength:20,placeholder:"Enter counter name",...D("name")}),a.name&&e.jsx("span",{className:"error",children:a.name.message})]})})]})}),C=()=>e.jsxs("div",{className:"modal-footer bottom-btn-sec",children:[e.jsx("button",{type:"button",className:"btn btn-cancel",onClick:u,children:"Cancel"}),e.jsx("button",{type:"button",className:"btn btn-submit",disabled:!1,onClick:h(p),children:"Save"})]});return e.jsx(P,{className:"modal fade category-modal show",dialgName:"modal-dialog-scrollable",show:!!n,closeModal:u,body:S(),header:j(),footer:C(),isLoading:!1})}const _=()=>{const{getData:n,counterData:u,isLoadingGet:b,deleteData:D,isLoadingDelete:h}=k(t=>t),[a,c]=l.useState(!1),[f,d]=l.useState(!1),N={search:"",page:1,limit:10,fromDate:null,toDate:null,sortBy:"createdAt",sortOrder:"DESC",isExcelExport:"false"},[m,o]=l.useState(N),y={total:6,data:[{id:1,centerName:"Dubai Center",counterName:"Counter A",createdAt:"2025-01-12T10:00:00Z"},{id:2,centerName:"Dubai Center",counterName:"Counter B",createdAt:"2025-01-15T11:20:00Z"},{id:3,centerName:"Abu Dhabi Center",counterName:"Counter 1",createdAt:"2025-02-02T09:10:00Z"},{id:4,centerName:"Sharjah Center",counterName:"Counter 3",createdAt:"2025-02-20T14:45:00Z"},{id:5,centerName:"Ajman Center",counterName:"Counter X",createdAt:"2025-03-01T08:35:00Z"},{id:6,centerName:"Fujairah Center",counterName:"Counter Z",createdAt:"2025-03-10T16:05:00Z"}]},g=()=>{d(!1),c(!1)};l.useEffect(()=>{},[m]);const s=t=>{o(x=>({...x,sortBy:t,sortOrder:x.sortOrder==="ASC"?"DESC":"ASC"}))},i=t=>e.jsxs(e.Fragment,{children:[e.jsx(A,{id:"edit",place:"bottom",content:"Edit",style:{backgroundColor:"#051a53"}}),e.jsx(A,{id:"delete",place:"bottom",content:"Delete",style:{backgroundColor:"#051a53"}}),e.jsx("img",{src:W,alt:"edit","data-tooltip-id":"edit",onClick:()=>d(t)}),e.jsx("img",{src:q,alt:"delete","data-tooltip-id":"delete",onClick:()=>c(t)})]}),p=[{name:"Center Name",selector:"centerName",contentClass:"user-pic",cell:t=>e.jsx("span",{children:(t==null?void 0:t.centerName)||"-"}),sort:!0},{name:"Counter",selector:"counterName",contentClass:"user-pic",cell:t=>e.jsx("span",{children:(t==null?void 0:t.counterName)||"-"})},{name:"Created Date",selector:"createdAt",cell:t=>e.jsx("span",{children:V(t==null?void 0:t.createdAt)}),sort:!0},{name:"Action",disableViewClick:!0,contentClass:"action-wrap",thclass:"actions-edit employee-actn-edit",cell:t=>i(t)}],j=l.useMemo(()=>$.debounce(t=>{o(x=>({...x,search:t,page:1}))},500),[]),S=()=>{{c(!1);return}},C=y;return e.jsxs(e.Fragment,{children:[e.jsx(B,{addButton:{name:"Add Item",type:"button",action:()=>d(!0)},hideFilter:!0,submitFilter:t=>{const{fromDate:x,toDate:I,...F}=t;o({...m,...F,fromDate:x?v(x).format("YYYY-MM-DD"):null,toDate:I?v(I).format("YYYY-MM-DD"):null,page:1})},clearOptions:()=>o(N),onSearch:j}),e.jsx(H,{pagination:{currentPage:m.page,limit:m.limit},count:(C==null?void 0:C.total)||0,columns:p,data:(C==null?void 0:C.data)||[],isLoading:!1,onPageChange:t=>o({...m,page:t}),setLimit:t=>o({...m,limit:t}),onSortChange:s,wrapClasses:"inventory-table-wrap"}),f&&e.jsx(R,{showModal:f,closeModal:()=>d(!1),onRefreshCounter:g}),a&&e.jsx(O,{isDelete:!0,isLoading:!1,showModal:a,closeModal:()=>c(!1),message:`Are you sure you want to delete this ${(a==null?void 0:a.counterName)||(a==null?void 0:a.name)||""}?`,onCancel:()=>c(!1),onSubmit:S})]})};export{_ as default};
