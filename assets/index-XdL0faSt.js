import{G as L,y as T,z as b,u as Z,s as Y,r as j,j as a,C as G,o as P,b as O,c as B,l as I,k as R,h,m as $,n as q,O as H,M as A,q as z,p as J}from"./index-CYvW9AeG.js";const K=s=>L.post("/visa-entry",s),Q=(s,m)=>L.put(`/visa-entry/${s}`,m),U=s=>L.get("/visa-entry",{params:s}),W=s=>L.delete(`/visa-entry/${s}`),C={postData:K,patchData:Q,getData:U,deleteData:W},N=T(s=>({isLoading:!1,isLoadingGet:!1,isLoadingDelete:!1,errorMessage:"",successMessage:"",visaEntryData:null,postData:async(m,d)=>{var u,p,o,t,r,g,n,i;try{s({isLoading:!0});const{data:e}=await C.postData(m),{success:f}=b.getState();f(((p=(u=e==null?void 0:e.response)==null?void 0:u.data)==null?void 0:p.message)??(e==null?void 0:e.message)),s({successMessage:((t=(o=e==null?void 0:e.response)==null?void 0:o.data)==null?void 0:t.message)??(e==null?void 0:e.message),isLoading:!1}),d&&d()}catch(e){const{error:f}=b.getState();s({errorMessage:((g=(r=e==null?void 0:e.response)==null?void 0:r.data)==null?void 0:g.message)??(e==null?void 0:e.message),isLoading:!1}),f(((i=(n=e==null?void 0:e.response)==null?void 0:n.data)==null?void 0:i.message)??e.message)}},patchData:async(m,d)=>{var u,p,o,t,r,g,n,i;try{s({isLoading:!0});const{id:e,...f}=m,{data:l}=await C.patchData(e,f),{success:E}=b.getState();E(((p=(u=l==null?void 0:l.response)==null?void 0:u.data)==null?void 0:p.message)??(l==null?void 0:l.message)),d&&d(),s({successMessage:((t=(o=l==null?void 0:l.response)==null?void 0:o.data)==null?void 0:t.message)??(l==null?void 0:l.message),isLoading:!1})}catch(e){const{error:f}=b.getState();s({errorMessage:((g=(r=e==null?void 0:e.response)==null?void 0:r.data)==null?void 0:g.message)??(e==null?void 0:e.message),isLoading:!1}),f(((i=(n=e==null?void 0:e.response)==null?void 0:n.data)==null?void 0:i.message)??e.message)}},getData:async m=>{var d,u,p,o;try{s({isLoadingGet:!0});const{data:t}=await C.getData(m),r=t;s({visaEntryData:r==null?void 0:r.data,isLoadingGet:!1})}catch(t){const{error:r}=b.getState();s({errorMessage:((u=(d=t==null?void 0:t.response)==null?void 0:d.data)==null?void 0:u.message)??(t==null?void 0:t.message),isLoadingGet:!1}),r(((o=(p=t==null?void 0:t.response)==null?void 0:p.data)==null?void 0:o.message)??t.message)}},deleteData:async(m,d)=>{var u,p,o,t,r,g;try{s({isLoadingDelete:!0});const{data:n}=await C.deleteData(m),i=n;s({visaEntryData:i==null?void 0:i.data,successMessage:((p=(u=n==null?void 0:n.response)==null?void 0:u.data)==null?void 0:p.message)??(n==null?void 0:n.message),isLoadingDelete:!1}),d&&d()}catch(n){const{error:i}=b.getState();s({errorMessage:((t=(o=n==null?void 0:n.response)==null?void 0:o.data)==null?void 0:t.message)??(n==null?void 0:n.message),isLoadingDelete:!1}),i(((g=(r=n==null?void 0:n.response)==null?void 0:r.data)==null?void 0:g.message)??n.message)}}})),X=P({name:B().nonempty("Name is required").max(20,"Name must be 10 characters or less"),isEZPass:O().optional()});function _({showModal:s,closeModal:m,onRefreshVisaEntry:d}){const{register:u,handleSubmit:p,formState:{errors:o},setValue:t,reset:r}=Z({resolver:Y(X),defaultValues:{name:"",isEZPass:!1}}),{postData:g,patchData:n,isLoading:i}=N(D=>D);j.useEffect(()=>{s!=null&&s.id?(t("name",(s==null?void 0:s.name)||""),t("isEZPass",(s==null?void 0:s.isEZPass)||!1)):r()},[s==null?void 0:s.id]);const e=D=>{s!=null&&s.id?n({id:s.id,...D},()=>{d()}):g(D,()=>{d()}),m()},f=()=>a.jsxs(a.Fragment,{children:[a.jsx("h4",{className:"modal-title",children:s!=null&&s.id?"Edit Visa Entry":"Add Visa Entry"}),a.jsx("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:m})]}),l=()=>a.jsx(a.Fragment,{children:a.jsx("div",{className:"modal-body custom-scroll",children:a.jsx("div",{className:"row",children:a.jsx("div",{className:"col-12",children:a.jsxs("div",{className:"form-group",children:[a.jsxs("label",{htmlFor:"name",className:"form-label",children:["Name",a.jsx("span",{className:"text-danger",children:"*"})]}),a.jsx("input",{type:"text",id:"name",className:"form-control",autoComplete:"off",maxLength:20,...u("name")}),o.name&&a.jsx("span",{className:"error",children:o.name.message})]})})})})}),E=()=>a.jsx(a.Fragment,{children:a.jsxs("div",{className:"modal-footer bottom-btn-sec",children:[a.jsx("button",{type:"button",className:"btn btn-cancel",onClick:m,children:"Cancel"}),a.jsx("button",{type:"submit",className:"btn btn-submit",disabled:i,onClick:p(e),children:i?"Loading...":"Save"})]})});return a.jsx(G,{className:"modal fade category-mgmt-modal show",dialgName:"modal-dialog-scrollable",show:!!s,closeModal:m,body:l(),header:f(),footer:E(),isLoading:!1})}const ee=()=>{const{getData:s,visaEntryData:m,isLoadingGet:d,deleteData:u,isLoadingDelete:p}=N(c=>c),[o,t]=j.useState(!1),[r,g]=j.useState(!1),n={search:"",page:1,limit:10,fromDate:null,toDate:null,sortBy:"createdAt",sortOrder:"DESC",isExcelExport:"false"},[i,e]=j.useState(n),f={total:5,data:[{id:1,name:"Visa Entry 1",createdAt:"2025-01-10T09:30:00Z"},{id:2,name:"Visa Entry 2",createdAt:"2025-02-14T12:15:00Z"},{id:3,name:"Visa Entry 3",createdAt:"2025-03-05T08:45:00Z"},{id:4,name:"Visa Entry 4",createdAt:"2025-03-20T10:00:00Z"},{id:5,name:"Visa Entry 5",createdAt:"2025-04-02T11:20:00Z"}]},l=()=>{g(!1),t(!1)};j.useEffect(()=>{},[i]);const E=c=>{e(y=>({...y,sortBy:c,sortOrder:y.sortOrder==="ASC"?"DESC":"ASC"}))},D=c=>a.jsxs(a.Fragment,{children:[a.jsx(A,{id:"edit",place:"bottom",content:"Edit",style:{backgroundColor:"#051a53"}}),a.jsx(A,{id:"delete",place:"bottom",content:"Delete",style:{backgroundColor:"#051a53"}}),a.jsx("img",{src:z,alt:"edit","data-tooltip-id":"edit",onClick:()=>g(c)}),a.jsx("img",{src:J,alt:"delete","data-tooltip-id":"delete",onClick:()=>t(c)})]}),v=[{name:"Name",selector:"name",contentClass:"user-pic"},{name:"Created Date",selector:"createdAt",cell:c=>a.jsx("span",{children:H(c==null?void 0:c.createdAt)})},{name:"Action",contentClass:"action-wrap",disableViewClick:!0,thclass:"actions-edit employee-actn-edit",cell:c=>D(c)}],V=j.useMemo(()=>I.debounce(c=>{e(y=>({...y,search:c,page:1}))},500),[]),k=()=>{{t(!1);return}},x=f;return a.jsxs(a.Fragment,{children:[a.jsx(R,{addButton:{name:"Add Item",type:"button",action:()=>g(!0)},hideFilter:!0,onSearch:V,submitFilter:c=>{const{fromDate:y,toDate:S,...F}=c;e({...i,...F,fromDate:y?h(y).format("YYYY-MM-DD"):null,toDate:S?h(S).format("YYYY-MM-DD"):null,page:1})},clearOptions:()=>{e(n)}}),a.jsx($,{pagination:{currentPage:i.page,limit:i.limit},count:(x==null?void 0:x.total)||0,columns:v,data:(x==null?void 0:x.data)||[],isLoading:!1,onPageChange:c=>e({...i,page:c}),setLimit:c=>e({...i,limit:c}),onSortChange:E,wrapClasses:"inventory-table-wrap"}),r&&a.jsx(_,{showModal:r,closeModal:()=>g(!1),onRefreshVisaEntry:l}),o&&a.jsx(q,{isDelete:!0,isLoading:!1,showModal:o,closeModal:()=>t(!1),message:`Are you sure you want to delete this ${o==null?void 0:o.name}?`,onCancel:()=>t(!1),onSubmit:k})]})};export{ee as default};
