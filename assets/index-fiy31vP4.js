import{G as T,x as v,y as b,u as Y,s as G,r as j,j as s,C as P,o as B,b as O,c as R,l as V,k as $,h as S,m as H,n as I,K as q,M as h,p as K}from"./index-NT2wBZmo.js";import{e as z}from"./edit-iaQC2oZw.js";import"./CenterReducer-BfJiYV20.js";const J=t=>T.post("/appointment-type",t),Q=(t,l)=>T.put(`/appointment-type/${t}`,l),U=t=>T.get("/appointment-type",{params:t}),W=t=>T.delete(`/appointment-type/${t}`),C={postData:J,patchData:Q,getData:U,deleteData:W},N=v(t=>({isLoading:!1,isLoadingGet:!1,isLoadingDelete:!1,errorMessage:"",successMessage:"",appointmentTypeData:null,postData:async(l,p)=>{var g,u,i,a,m,d,n,o;try{t({isLoading:!0});const{data:e}=await C.postData(l),{success:f}=b.getState();f(((u=(g=e==null?void 0:e.response)==null?void 0:g.data)==null?void 0:u.message)??(e==null?void 0:e.message)),t({successMessage:((a=(i=e==null?void 0:e.response)==null?void 0:i.data)==null?void 0:a.message)??(e==null?void 0:e.message),isLoading:!1}),p&&p()}catch(e){const{error:f}=b.getState();t({errorMessage:((d=(m=e==null?void 0:e.response)==null?void 0:m.data)==null?void 0:d.message)??(e==null?void 0:e.message),isLoading:!1}),f(((o=(n=e==null?void 0:e.response)==null?void 0:n.data)==null?void 0:o.message)??e.message)}},patchData:async(l,p)=>{var g,u,i,a,m,d,n,o;try{t({isLoading:!0});const{id:e,...f}=l,{data:r}=await C.patchData(e,f),{success:A}=b.getState();A(((u=(g=r==null?void 0:r.response)==null?void 0:g.data)==null?void 0:u.message)??(r==null?void 0:r.message)),p&&p(),t({successMessage:((a=(i=r==null?void 0:r.response)==null?void 0:i.data)==null?void 0:a.message)??(r==null?void 0:r.message),isLoading:!1})}catch(e){const{error:f}=b.getState();t({errorMessage:((d=(m=e==null?void 0:e.response)==null?void 0:m.data)==null?void 0:d.message)??(e==null?void 0:e.message),isLoading:!1}),f(((o=(n=e==null?void 0:e.response)==null?void 0:n.data)==null?void 0:o.message)??e.message)}},getData:async l=>{var p,g,u,i;try{t({isLoadingGet:!0});const{data:a}=await C.getData(l),m=a;t({appointmentTypeData:m==null?void 0:m.data,isLoadingGet:!1})}catch(a){const{error:m}=b.getState();t({errorMessage:((g=(p=a==null?void 0:a.response)==null?void 0:p.data)==null?void 0:g.message)??(a==null?void 0:a.message),isLoadingGet:!1}),m(((i=(u=a==null?void 0:a.response)==null?void 0:u.data)==null?void 0:i.message)??a.message)}},deleteData:async(l,p)=>{var g,u,i,a,m,d;try{t({isLoadingDelete:!0});const{data:n}=await C.deleteData(l),o=n;t({appointmentTypeData:o==null?void 0:o.data,successMessage:((u=(g=n==null?void 0:n.response)==null?void 0:g.data)==null?void 0:u.message)??(n==null?void 0:n.message),isLoadingDelete:!1}),p&&p()}catch(n){const{error:o}=b.getState();t({errorMessage:((a=(i=n==null?void 0:n.response)==null?void 0:i.data)==null?void 0:a.message)??(n==null?void 0:n.message),isLoadingDelete:!1}),o(((d=(m=n==null?void 0:n.response)==null?void 0:m.data)==null?void 0:d.message)??n.message)}}})),X=B({name:R().nonempty("Name is required").max(20,"Name must be 10 characters or less"),isEZPass:O().optional()});function _({showModal:t,closeModal:l,onRefreshAppointmentType:p}){const{register:g,handleSubmit:u,formState:{errors:i},setValue:a,reset:m}=Y({resolver:G(X),defaultValues:{name:"",isEZPass:!1}}),{postData:d,patchData:n,isLoading:o}=N(D=>D);j.useEffect(()=>{t!=null&&t.id?(a("name",(t==null?void 0:t.name)||""),a("isEZPass",(t==null?void 0:t.isEZPass)||!1)):m()},[t==null?void 0:t.id]);const e=D=>{t!=null&&t.id?n({id:t.id,...D},()=>{p()}):d(D,()=>{p()}),l()},f=()=>s.jsxs(s.Fragment,{children:[s.jsx("h4",{className:"modal-title",children:t!=null&&t.id?"Edit Appointment Type":"Add Appointment Type"}),s.jsx("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:l})]}),r=()=>s.jsx(s.Fragment,{children:s.jsx("div",{className:"modal-body custom-scroll",children:s.jsx("div",{className:"row",children:s.jsx("div",{className:"col-12",children:s.jsxs("div",{className:"form-group",children:[s.jsxs("label",{htmlFor:"name",className:"form-label",children:["Name",s.jsx("span",{className:"text-danger",children:"*"})]}),s.jsx("input",{type:"text",id:"name",className:"form-control",autoComplete:"off",maxLength:20,...g("name")}),i.name&&s.jsx("span",{className:"error",children:i.name.message})]})})})})}),A=()=>s.jsx(s.Fragment,{children:s.jsxs("div",{className:"modal-footer bottom-btn-sec",children:[s.jsx("button",{type:"button",className:"btn btn-cancel",onClick:l,children:"Cancel"}),s.jsx("button",{type:"submit",className:"btn btn-submit",disabled:o,onClick:u(e),children:o?"Loading...":"Save"})]})});return s.jsx(P,{className:"modal fade category-mgmt-modal show",dialgName:"modal-dialog-scrollable",show:!!t,closeModal:l,body:r(),header:f(),footer:A(),isLoading:!1})}const se=()=>{const{getData:t,appointmentTypeData:l,isLoadingGet:p,deleteData:g,isLoadingDelete:u}=N(c=>c),[i,a]=j.useState(!1),[m,d]=j.useState(!1),n={search:"",page:1,limit:10,fromDate:null,toDate:null,sortBy:"createdAt",sortOrder:"DESC",isExcelExport:"false"},[o,e]=j.useState(n),f={total:5,data:[{id:1,name:"Appointment Type 1",createdAt:"2025-01-10T09:30:00Z"},{id:2,name:"Appointment Type 2",createdAt:"2025-02-14T12:15:00Z"},{id:3,name:"Appointment Type 3",createdAt:"2025-03-05T08:45:00Z"},{id:4,name:"Appointment Type 4",createdAt:"2025-03-20T10:00:00Z"},{id:5,name:"Appointment Type 5",createdAt:"2025-04-02T11:20:00Z"}]},r=()=>{d(!1),a(!1)};j.useEffect(()=>{},[o]);const A=c=>{e(y=>({...y,sortBy:c,sortOrder:y.sortOrder==="ASC"?"DESC":"ASC"}))},D=c=>s.jsxs(s.Fragment,{children:[s.jsx(h,{id:"edit",place:"bottom",content:"Edit",style:{backgroundColor:"#051a53"}}),s.jsx(h,{id:"delete",place:"bottom",content:"Delete",style:{backgroundColor:"#051a53"}}),s.jsx("img",{src:z,alt:"edit","data-tooltip-id":"edit",onClick:()=>d(c)}),s.jsx("img",{src:K,alt:"delete","data-tooltip-id":"delete",onClick:()=>a(c)})]}),E=[{name:"Name",selector:"name",contentClass:"user-pic"},{name:"Created Date",selector:"createdAt",cell:c=>s.jsx("span",{children:q(c==null?void 0:c.createdAt)})},{name:"Action",contentClass:"action-wrap",disableViewClick:!0,thclass:"actions-edit employee-actn-edit",cell:c=>D(c)}],k=j.useMemo(()=>V.debounce(c=>{e(y=>({...y,search:c,page:1}))},500),[]),F=()=>{{a(!1);return}},x=f;return s.jsxs(s.Fragment,{children:[s.jsx($,{addButton:{name:"Add Type",type:"button",action:()=>d(!0)},hideFilter:!0,onSearch:k,submitFilter:c=>{const{fromDate:y,toDate:L,...Z}=c;e({...o,...Z,fromDate:y?S(y).format("YYYY-MM-DD"):null,toDate:L?S(L).format("YYYY-MM-DD"):null,page:1})},clearOptions:()=>{e(n)}}),s.jsx(H,{pagination:{currentPage:o.page,limit:o.limit},count:(x==null?void 0:x.total)||0,columns:E,data:(x==null?void 0:x.data)||[],isLoading:!1,onPageChange:c=>e({...o,page:c}),setLimit:c=>e({...o,limit:c}),onSortChange:A,wrapClasses:"inventory-table-wrap"}),m&&s.jsx(_,{showModal:m,closeModal:()=>d(!1),onRefreshAppointmentType:r}),i&&s.jsx(I,{isDelete:!0,isLoading:!1,showModal:i,closeModal:()=>a(!1),message:`Are you sure you want to delete this ${i==null?void 0:i.name}?`,onCancel:()=>a(!1),onSubmit:F})]})};export{se as default};
