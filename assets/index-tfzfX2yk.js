import{r as d,j as a,C as _,h as k,M as G,S as W,c as K,d as z,u as q,l as J,e as Q,f as X,I as e2,g as t2,i as a2,k as s2}from"./index-DaK327To.js";import{e as l2}from"./edit-iaQC2oZw.js";const o2="data:image/svg+xml,%3csvg%20width='43'%20height='43'%20viewBox='0%200%2043%2043'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3ccircle%20cx='21.5'%20cy='21.5'%20r='21.5'%20fill='%23D8E1ED'%20fill-opacity='0.37'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M32%2022C32%2021.5814%2031.7676%2021.3065%2031.3029%2020.7567C29.6028%2018.7452%2025.8527%2015%2021.5%2015C17.1472%2015%2013.3972%2018.7452%2011.6971%2020.7567C11.2324%2021.3065%2011%2021.5814%2011%2022C11%2022.4186%2011.2324%2022.6935%2011.6971%2023.2433C13.3972%2025.2549%2017.1472%2029%2021.5%2029C25.8527%2029%2029.6028%2025.2549%2031.3029%2023.2433C31.7676%2022.6935%2032%2022.4186%2032%2022ZM21.5%2025.5C23.4837%2025.5%2025.0917%2023.9331%2025.0917%2022C25.0917%2020.0669%2023.4837%2018.5%2021.5%2018.5C19.5164%2018.5%2017.9083%2020.0669%2017.9083%2022C17.9083%2023.9331%2019.5164%2025.5%2021.5%2025.5Z'%20fill='%233982A7'/%3e%3c/svg%3e",n2="data:image/svg+xml,%3csvg%20width='43'%20height='43'%20viewBox='0%200%2043%2043'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3ccircle%20cx='21.5'%20cy='21.5'%20r='21.5'%20fill='%23D8E1ED'%20fill-opacity='0.37'/%3e%3cpath%20d='M17.6448%2021.2198L13.4203%2016.8445C11.7571%2018.7223%2011.1269%2020.6034%2011.116%2020.6419L11%2021L11.1149%2021.3581C11.139%2021.434%2013.6489%2028.9324%2022.0005%2028.9324C23.017%2028.9324%2023.9427%2028.8168%2024.7928%2028.6231L21.7883%2025.5113C20.7065%2025.4564%2019.6831%2024.9866%2018.9172%2024.1934C18.1514%2023.4002%2017.6978%2022.3403%2017.6448%2021.2198ZM22.0005%2013.0676C19.9709%2013.0676%2018.3078%2013.5254%2016.9215%2014.1985L12.8677%2010L11.3206%2011.6023L31.0152%2032L32.5623%2030.3976L28.9538%2026.6603C31.8402%2024.4472%2032.8698%2021.4057%2032.8851%2021.3581L33%2021L32.8851%2020.6419C32.861%2020.566%2030.3522%2013.0676%2022.0005%2013.0676ZM24.086%2021.6187C24.2906%2020.8515%2024.1166%2019.988%2023.5477%2019.3977C22.9787%2018.8073%2022.1439%2018.6282%2021.4031%2018.8401L19.7532%2017.1312C20.4293%2016.7006%2021.2068%2016.4709%2022.0005%2016.4672C24.4142%2016.4672%2026.3771%2018.5002%2026.3771%2021C26.3739%2021.8219%2026.1516%2022.627%2025.7349%2023.3265L24.086%2021.6187Z'%20fill='%233982A7'/%3e%3c/svg%3e",i2="data:image/svg+xml,%3csvg%20width='43'%20height='43'%20viewBox='0%200%2043%2043'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3ccircle%20cx='21.5'%20cy='21.5'%20r='21.5'%20fill='%23D8E1ED'%20fill-opacity='0.37'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M14%2020.5C14%2016.4931%2014%2014.4896%2015.2448%2013.2448C16.4896%2012%2018.4931%2012%2022.5%2012C26.5069%2012%2028.5104%2012%2029.7552%2013.2448C31%2014.4896%2031%2016.4931%2031%2020.5C31%2024.5069%2031%2026.5104%2029.7552%2027.7552C28.5104%2029%2026.5069%2029%2022.5%2029C18.4931%2029%2016.4896%2029%2015.2448%2027.7552C14%2026.5104%2014%2024.5069%2014%2020.5ZM22.5%2015.6125C22.8521%2015.6125%2023.1375%2015.8979%2023.1375%2016.25V20.6609L24.5992%2019.1992C24.8482%2018.9503%2025.2518%2018.9503%2025.5008%2019.1992C25.7497%2019.4482%2025.7497%2019.8518%2025.5008%2020.1008L22.9508%2022.6508C22.8312%2022.7704%2022.6691%2022.8375%2022.5%2022.8375C22.3309%2022.8375%2022.1688%2022.7704%2022.0492%2022.6508L19.4992%2020.1008C19.2503%2019.8518%2019.2503%2019.4482%2019.4992%2019.1992C19.7482%2018.9503%2020.1518%2018.9503%2020.4008%2019.1992L21.8625%2020.6609V16.25C21.8625%2015.8979%2022.1479%2015.6125%2022.5%2015.6125ZM19.1%2024.1125C18.7479%2024.1125%2018.4625%2024.3979%2018.4625%2024.75C18.4625%2025.1021%2018.7479%2025.3875%2019.1%2025.3875H25.9C26.2521%2025.3875%2026.5375%2025.1021%2026.5375%2024.75C26.5375%2024.3979%2026.2521%2024.1125%2025.9%2024.1125H19.1Z'%20fill='%233982A7'/%3e%3c/svg%3e",c2="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='800px'%20height='800px'%20viewBox='0%200%20120%20120'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20width='120'%20height='120'%20fill='%23EFF1F3'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M33.2503%2038.4816C33.2603%2037.0472%2034.4199%2035.8864%2035.8543%2035.875H83.1463C84.5848%2035.875%2085.7503%2037.0431%2085.7503%2038.4816V80.5184C85.7403%2081.9528%2084.5807%2083.1136%2083.1463%2083.125H35.8543C34.4158%2083.1236%2033.2503%2081.957%2033.2503%2080.5184V38.4816ZM80.5006%2041.1251H38.5006V77.8751L62.8921%2053.4783C63.9172%2052.4536%2065.5788%2052.4536%2066.6039%2053.4783L80.5006%2067.4013V41.1251ZM43.75%2051.6249C43.75%2054.5244%2046.1005%2056.8749%2049%2056.8749C51.8995%2056.8749%2054.25%2054.5244%2054.25%2051.6249C54.25%2048.7254%2051.8995%2046.3749%2049%2046.3749C46.1005%2046.3749%2043.75%2048.7254%2043.75%2051.6249Z'%20fill='%23687787'/%3e%3c/svg%3e",d2=({src:r})=>{const[c,C]=d.useState(!0),[h,m]=d.useState(!1),y=()=>C(!1),p=()=>{C(!1),m(!0)};return a.jsxs("figure",{className:"in-img",children:[c&&a.jsx(_,{height:40}),a.jsx("img",{src:h||!r?c2:r,alt:"Item",className:"img",onLoad:y,onError:p,style:{display:c?"none":"block"},crossOrigin:"anonymous"})]})},r2=({showAction:r=!0,setModal:c,getItemById:C,navigate:h,setModalConfig:m,downloadContent:y,viewIcon:p,editIcon:M,showHideIcon:x,deleteIcon:L,downloadIcon:D,downloadingRowId:v,setDownloadingRowId:b})=>{const u=[{name:"Image",selector:"image",titleClasses:"tw1",contentClass:"",cell:e=>{var l;return a.jsx(d2,{src:(l=e.images)==null?void 0:l[0]})}},{name:"Item ID",selector:"itemId",titleClasses:"tw1"},{name:"Item Name",selector:"itemName",titleClasses:"tw1",contentClass:"user-pic"},{name:"EZ Pass Number",selector:"eZPassNumber",titleClasses:"tw1",contentClass:"user-pic",cell:e=>e!=null&&e.eZPassNumber&&e.eZPassNumber!=="null"?e.eZPassNumber:"-"},{name:"Category",selector:"category.name",titleClasses:"tw1",contentClass:"user-pic"},{name:"Sub Category",selector:"subcategory.name",titleClasses:"tw1",contentClass:"user-pic"},{name:"Item Created date",selector:"createdAt",titleClasses:"tw1",contentClass:"user-pic",cell:e=>k(e.createdAt).format("MMM D, YYYY")},{name:"Have Parts",selector:"haveParts",titleClasses:"tw1",contentClass:"user-pic",cell:e=>a.jsx("span",{children:e.hasParts?"Yes":"No"})}],S={name:"Action",selector:"action",titleClasses:"tw7",contentClass:"action-wrap",cell:(e,l)=>a.jsxs(a.Fragment,{children:[a.jsx(G,{id:`tooltip-${e.id||l}`,place:"bottom",style:{backgroundColor:"#2ca0da"}}),a.jsx("span",{"data-tooltip-id":`tooltip-${e.id||l}`,"data-tooltip-content":"Edit",onClick:n=>{n.stopPropagation(),h(`/inventory-management/edit/${e.id}`)},children:a.jsx("img",{src:M,alt:"Edit"})}),a.jsx("span",{"data-tooltip-id":`tooltip-${e.id||l}`,"data-tooltip-content":e.isVisible?"Hide":"Show",onClick:n=>{n.stopPropagation(),m({id:e.id,type:e.isVisible?"show":"hide",name:e==null?void 0:e.itemName})},children:a.jsx("img",{src:e.isVisible?x:p,alt:e.isVisible?"Show":"Hide"})}),a.jsx("span",{"data-tooltip-id":`tooltip-${e.id||l}`,"data-tooltip-content":"Delete",onClick:n=>{n.stopPropagation(),m({id:e.id,type:"delete",name:e==null?void 0:e.itemName})},children:a.jsx("img",{src:L,alt:"Delete"})}),a.jsx("span",{className:v===((e==null?void 0:e.id)||l)?"loader-wrp":"","data-tooltip-id":`tooltip-${e.id||l}`,"data-tooltip-content":"Download Barcode",onClick:async n=>{n.stopPropagation();const I=e.id||l;b(I);try{await y(e.barcode,`${e.itemId}.png`)}catch(s){console.error("Download failed",s)}finally{b(null)}},children:v===((e==null?void 0:e.id)||l)?a.jsx(W,{size:"sm",animation:"border",variant:"primary"}):a.jsx("img",{src:D,alt:"Download"})})]})};return r?[...u,S]:u},u2=()=>{const{getInventoryList:r,inventoryList:c,pagination:C,deleteItemById:h,isLoading:m,isListLoading:y,getItemById:p,inventoryItem:M,showHide:x,exportInventory:L,isExportLoading:D,bulkUploadFiles:v,isUploading:b}=K(t=>t),{getAllCategory:u,getCategory:S,isLoadingCat:e,getAllSubCategory:l,subCategories:n}=z(t=>t),I=q(),[s,w]=d.useState({type:null,action:null,name:null}),[E,N]=d.useState(null),P={search:"",page:1,limit:10,fromDate:null,toDate:null,sortBy:"createdAt",sortOrder:"DESC",isExcelExport:"false"},[o,g]=d.useState(P);d.useEffect(()=>{S(),l()},[]),d.useEffect(()=>{r(o)},[o]),console.log(" params",o);const V=t=>{g(i=>({...i,sortBy:t,sortOrder:i.sortOrder==="ASC"?"DESC":"ASC"}))},B=t=>{N({mode:"VIEW",id:t.id}),p(t.id)},[Z,A]=d.useState(null),Y=r2({showAction:!0,setModal:N,getItemById:p,navigate:I,setModalConfig:w,downloadContent:s2,viewIcon:o2,editIcon:l2,showHideIcon:n2,deleteIcon:a2,downloadIcon:i2,downloadingRowId:Z,setDownloadingRowId:A}),H=(t,i)=>{const f=new FormData;t.forEach(j=>{f.append("file",j)}),v(f,o,i)},O=()=>{w({type:null,action:null,name:null})},$=()=>{switch(s.type){case"delete":return`Are you sure you want to delete item ${s.name} ?`;case"show":return`Are you sure you want to hide item ${s.name}?`;case"hide":return`Are you sure you want to show item ${s.name}?`}},F=()=>a.jsx(t2,{closeModal:O,isLoading:m,message:$(),onSubmit:async()=>{if(s.id)try{switch(s.type){case"delete":await h(s.id,o);break;case"show":await x(s.id,!1,o);break;case"hide":await x(s.id,!0,o);break;default:break}w({type:null,action:null,name:null})}catch(t){console.error("Error in modal action:",t)}},showModal:s.type,isDelete:s.type==="delete",isWarning:s.type==="show"||s.type==="hide"}),R=J.debounce(t=>{g(i=>({...i,search:t,page:1}))},500),T=[{fieldName:"Visibility",BE_keyName:"isVisible",fieldType:"select",Options:[{label:"Shown",value:!0},{label:"Hidden",value:!1}]},{fieldName:"Category",BE_keyName:"category",fieldType:"select",isMulti:!0,Options:u==null?void 0:u.map(t=>({label:t.name,value:t.id}))},{fieldName:"Sub Category",isLoading:e,BE_keyName:"subcategory",fieldType:"select",isMulti:!0,Options:n==null?void 0:n.map(t=>({label:t.name,value:t.id})),noOptionsMessage:"Select a category first"},{fieldName:"PartsFound",BE_keyName:"hasParts",fieldType:"radio",Options:["Yes","No"]},{fieldName:"Created Date",fieldType:"dateRangeCombined",fromKey:"fromDate",toKey:"toDate"}],U=async()=>{L(o)};return a.jsxs(a.Fragment,{children:[F(),a.jsx(Q,{exportExcel:c!=null&&c.length?U:null,exportLoading:D,uploadExcel:!0,uploadLoading:b,onExcelUpload:H,uploadTitle:"Bulk Upload Inventory",addButton:{name:"Add Item",type:"link",path:"/inventory-management/add"},onSearch:R,filterOptions:T,type:"inventory",submitFilter:t=>{const{fromDate:i,toDate:f,...j}=t;console.log(t),g({...o,...j,fromDate:i?k(i).format("YYYY-MM-DD"):null,toDate:f?k(f).format("YYYY-MM-DD"):null,page:"1"})},clearOptions:()=>{g(P)}}),a.jsx(X,{pagination:{currentPage:o.page,limit:o.limit},count:C.totalRecords,columns:Y,data:c,isLoading:y,onPageChange:t=>g({...o,page:t}),setLimit:t=>g({...o,limit:t}),onSortChange:V,wrapClasses:"inventory-table-wrap",onRowClick:B}),(E==null?void 0:E.mode)==="VIEW"&&a.jsx(e2,{showModal:E,closeModal:()=>N(null),inventoryItem:M})]})};export{u2 as default};
