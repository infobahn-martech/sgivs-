import{j as e,M as $,p as w,W as ee,X as ae,u as se,s as te,r as l,C as ne,a as f,Y as P,o as G,c,Z as le,_ as oe,$ as K,e as ie,l as re,k as ce,h as _,m as me,n as U}from"./index-CYvW9AeG.js";const de=({onDeleteClick:i,onStatusClick:p,showActions:m=!0,isDashboard:r=!1,onUserNotify:C})=>{const t=[{name:"Center",selector:"center",titleClasses:r?"th-email":"tw3"},{name:"Country",selector:"country",titleClasses:r?"th-name":"tw1",contentClass:"user-pic"},{name:"Mission",selector:"mission",titleClasses:r?"th-last-name":"tw2"},{name:"Application Type",selector:"applicationType",titleClasses:r?"th-phone":"tw4"},{name:"Appointment Type",selector:"appointmentType",titleClasses:r?"th-appointment-type":"tw5"}];return m&&t.push({name:"Action",selector:"action",titleClasses:"tw7",contentClass:"action-wrap",cell:s=>e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"form-check form-switch","data-tooltip-id":"alert-tooltip","data-tooltip-content":s!=null&&s.isNotificationEnabled?"Notification Disable":"Notification Enable",children:e.jsx("input",{className:"form-check-input",type:"checkbox",role:"switch",id:"flexSwitchCheckChecked",checked:s==null?void 0:s.isNotificationEnabled,onChange:()=>C(s)})}),e.jsx($,{id:"alert-tooltip",place:"top",effect:"solid",style:{backgroundColor:"#051a53"}}),e.jsx("img",{src:w,alt:"Delete","data-tooltip-id":"delete-tooltip","data-tooltip-content":"Delete",className:"cursor-pointer",onClick:()=>i(s)}),e.jsx($,{id:"delete-tooltip",place:"top",effect:"solid",style:{backgroundColor:"#051a53"}}),e.jsx("img",{src:(s==null?void 0:s.status)===2?ee:ae,alt:(s==null?void 0:s.status)===2?"Active":"Blocked","data-tooltip-id":`status-tooltip-${s==null?void 0:s.id}`,"data-tooltip-content":(s==null?void 0:s.status)===2?"Active":"Block",className:"cursor-pointer",onClick:()=>p(s)}),e.jsx($,{id:`status-tooltip-${s==null?void 0:s.id}`,place:"top",effect:"solid",style:{backgroundColor:"#051a53"}})]})}),t},R=({className:i,onChange:p,value:m})=>{const r=(m==null?void 0:m.startDate)||null,C=(m==null?void 0:m.endDate)||null;return e.jsx(oe,{selected:r,onChange:t=>{const[s,j]=t;p({startDate:s,endDate:j})},startDate:r,endDate:C,selectsRange:!0,showYearDropdown:!0,showMonthDropdown:!0,showTwoColumnMonthYearPicker:!0,portalId:"root-portal",className:i,placeholderText:"Select date range",dateFormat:"yyyy-MM-dd",isClearable:!0})},pe=[{id:"1",name:"UAE"},{id:"2",name:"India"},{id:"3",name:"USA"}],ue=[{id:"1",name:"Abu Dhabi Mission"},{id:"2",name:"Dubai Mission"}],he=[{id:"1",name:"Dubai Center"},{id:"2",name:"Abu Dhabi Center"},{id:"3",name:"Sharjah Center"},{id:"4",name:"Ajman Center"}],ge=[{id:"1",name:"New"},{id:"2",name:"Renewal"}],fe=[{id:"1",name:"Normal"},{id:"2",name:"Urgent"}],xe=[{id:"SAT",name:"Saturday"},{id:"SUN",name:"Sunday"},{id:"MON",name:"Monday"},{id:"TUE",name:"Tuesday"},{id:"WED",name:"Wednesday"},{id:"THU",name:"Thursday"},{id:"FRI",name:"Friday"}],ye=[{id:"10",name:"10 Minutes"},{id:"15",name:"15 Minutes"},{id:"20",name:"20 Minutes"},{id:"30",name:"30 Minutes"}],je=[{id:"1",name:"1"},{id:"2",name:"2"},{id:"3",name:"3"},{id:"5",name:"5"},{id:"10",name:"10"}],Ne=[{id:"10",name:"10"},{id:"20",name:"20"},{id:"30",name:"30"},{id:"50",name:"50"},{id:"100",name:"100"}],be=[{id:"0",name:"No Lunch Break"},{id:"30",name:"30 Minutes"},{id:"45",name:"45 Minutes"},{id:"60",name:"60 Minutes"}],J=G({startDate:K().nullable(),endDate:K().nullable()}),Se=G({countryId:c().nonempty("Country is required"),missionId:c().nonempty("Mission is required"),centerId:c().nonempty("Center is required"),applicationTypeId:c().nonempty("Application Type is required"),appointmentTypeId:c().nonempty("Appointment Type is required"),offDays:le(c()).optional(),startTime:c().nonempty("Start time is required"),endTime:c().nonempty("End time is required"),lunchBreak:c().optional(),slotPeriod:c().nonempty("Slot period is required"),slotCapacity:c().nonempty("Slot capacity is required"),maxSlots:c().nonempty("Max slots is required"),bookingAllowFrom:c().nonempty("Booking allow from is required"),bookingAllowTill:c().nonempty("Booking allow till is required"),blockedDates:J.optional(),releaseDates:J.optional(),slotFullDates:J.optional()});function Ce({showModal:i,closeModal:p,onRefreshAppointmentSettings:m}){const{register:r,handleSubmit:C,formState:{errors:t},setValue:s,reset:j,watch:d,control:u}=se({resolver:te(Se),defaultValues:{countryId:"",missionId:"",centerId:"",applicationTypeId:"",appointmentTypeId:"",offDays:[],startTime:"",endTime:"",lunchBreak:"0",slotPeriod:"",slotCapacity:"",maxSlots:"",bookingAllowFrom:"",bookingAllowTill:"",blockedDates:{startDate:null,endDate:null},releaseDates:{startDate:null,endDate:null},slotFullDates:{startDate:null,endDate:null}}});l.useEffect(()=>{i!=null&&i.id||j()},[i==null?void 0:i.id,j,s,i]);const T=l.useMemo(()=>pe.map(a=>({label:a.name,value:String(a.id)})),[]),N=l.useMemo(()=>ue.map(a=>({label:a.name,value:String(a.id)})),[]),A=l.useMemo(()=>he.map(a=>({label:a.name,value:String(a.id)})),[]),b=l.useMemo(()=>ge.map(a=>({label:a.name,value:String(a.id)})),[]),M=l.useMemo(()=>fe.map(a=>({label:a.name,value:String(a.id)})),[]),S=l.useMemo(()=>xe.map(a=>({label:a.name,value:String(a.id)})),[]),I=l.useMemo(()=>ye.map(a=>({label:a.name,value:String(a.id)})),[]),B=l.useMemo(()=>je.map(a=>({label:a.name,value:String(a.id)})),[]),n=l.useMemo(()=>Ne.map(a=>({label:a.name,value:String(a.id)})),[]),v=l.useMemo(()=>be.map(a=>({label:a.name,value:String(a.id)})),[]),x=a=>{if(!a)return null;const g=a.getFullYear(),y=String(a.getMonth()+1).padStart(2,"0"),D=String(a.getDate()).padStart(2,"0");return`${g}-${y}-${D}`},L=a=>{var g,y,D,O,F,E;({...a,blockedDates:(x((g=a.blockedDates)==null?void 0:g.startDate),x((y=a.blockedDates)==null?void 0:y.endDate)),releaseDates:(x((D=a.releaseDates)==null?void 0:D.startDate),x((O=a.releaseDates)==null?void 0:O.endDate)),slotFullDates:(x((F=a.slotFullDates)==null?void 0:F.startDate),x((E=a.slotFullDates)==null?void 0:E.endDate))});{m==null||m(),p==null||p();return}},Y=()=>e.jsxs(e.Fragment,{children:[e.jsx("h4",{className:"modal-title",children:i!=null&&i.id?"Edit Appointment Settings":"Add Appointment Settings"}),e.jsx("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:p})]}),q=()=>e.jsx("div",{className:"modal-body",children:e.jsxs("div",{className:"row g-3",children:[e.jsx("div",{className:"col-lg-4 col-md-6",children:e.jsxs("div",{className:"form-group forms-custom",children:[e.jsxs("label",{className:"label",children:["Country",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx(f,{options:T,value:T.find(a=>a.value===d("countryId"))||null,onChange:a=>s("countryId",(a==null?void 0:a.value)||"",{shouldValidate:!0}),placeholder:"Select Country",className:"form-control"}),t.countryId&&e.jsx("span",{className:"error",children:t.countryId.message})]})}),e.jsx("div",{className:"col-lg-4 col-md-6",children:e.jsxs("div",{className:"form-group forms-custom",children:[e.jsxs("label",{className:"label",children:["Mission",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx(f,{options:N,value:N.find(a=>a.value===d("missionId"))||null,onChange:a=>s("missionId",(a==null?void 0:a.value)||"",{shouldValidate:!0}),placeholder:"Select Mission",className:"form-control"}),t.missionId&&e.jsx("span",{className:"error",children:t.missionId.message})]})}),e.jsx("div",{className:"col-lg-4 col-md-6",children:e.jsxs("div",{className:"form-group forms-custom",children:[e.jsxs("label",{className:"label",children:["Center",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx(f,{options:A,value:A.find(a=>a.value===d("centerId"))||null,onChange:a=>s("centerId",(a==null?void 0:a.value)||"",{shouldValidate:!0}),placeholder:"Select Center",className:"form-control"}),t.centerId&&e.jsx("span",{className:"error",children:t.centerId.message})]})}),e.jsx("div",{className:"col-lg-4 col-md-6",children:e.jsxs("div",{className:"form-group forms-custom",children:[e.jsxs("label",{className:"label",children:["Application Type",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx(f,{options:b,value:b.find(a=>a.value===d("applicationTypeId"))||null,onChange:a=>s("applicationTypeId",(a==null?void 0:a.value)||"",{shouldValidate:!0}),placeholder:"Select Application Type",className:"form-control"}),t.applicationTypeId&&e.jsx("span",{className:"error",children:t.applicationTypeId.message})]})}),e.jsx("div",{className:"col-lg-4 col-md-6",children:e.jsxs("div",{className:"form-group forms-custom",children:[e.jsxs("label",{className:"label",children:["Appointment Type",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx(f,{options:M,value:M.find(a=>a.value===d("appointmentTypeId"))||null,onChange:a=>s("appointmentTypeId",(a==null?void 0:a.value)||"",{shouldValidate:!0}),placeholder:"Select Appointment Type",className:"form-control"}),t.appointmentTypeId&&e.jsx("span",{className:"error",children:t.appointmentTypeId.message})]})}),e.jsx("div",{className:"col-lg-4 col-md-6",children:e.jsxs("div",{className:"form-group forms-custom",children:[e.jsx("label",{className:"label",children:"Off days"}),e.jsx(P,{control:u,name:"offDays",render:({field:a})=>e.jsx(f,{options:S,isMulti:!0,value:S.filter(g=>(a.value||[]).includes(g.value)),onChange:g=>a.onChange((g||[]).map(y=>y.value)),placeholder:"Select Off days",className:"form-control"})})]})}),e.jsx("div",{className:"col-lg-4 col-md-6",children:e.jsxs("div",{className:"form-group forms-custom",children:[e.jsxs("label",{className:"label",children:["Start time",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"time",className:"form-control",...r("startTime")}),t.startTime&&e.jsx("span",{className:"error",children:t.startTime.message})]})}),e.jsx("div",{className:"col-lg-4 col-md-6",children:e.jsxs("div",{className:"form-group forms-custom",children:[e.jsxs("label",{className:"label",children:["End time",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"time",className:"form-control",...r("endTime")}),t.endTime&&e.jsx("span",{className:"error",children:t.endTime.message})]})}),e.jsx("div",{className:"col-lg-4 col-md-6",children:e.jsxs("div",{className:"form-group forms-custom",children:[e.jsx("label",{className:"label",children:"Lunch break"}),e.jsx(f,{options:v,value:v.find(a=>a.value===d("lunchBreak"))||null,onChange:a=>s("lunchBreak",(a==null?void 0:a.value)||"0",{shouldValidate:!0}),placeholder:"Select Lunch break",className:"form-control"}),t.lunchBreak&&e.jsx("span",{className:"error",children:t.lunchBreak.message})]})}),e.jsx("div",{className:"col-lg-4 col-md-6",children:e.jsxs("div",{className:"form-group forms-custom",children:[e.jsxs("label",{className:"label",children:["Slot period",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx(f,{options:I,value:I.find(a=>a.value===d("slotPeriod"))||null,onChange:a=>s("slotPeriod",(a==null?void 0:a.value)||"",{shouldValidate:!0}),placeholder:"Select Slot period",className:"form-control"}),t.slotPeriod&&e.jsx("span",{className:"error",children:t.slotPeriod.message})]})}),e.jsx("div",{className:"col-lg-4 col-md-6",children:e.jsxs("div",{className:"form-group forms-custom",children:[e.jsxs("label",{className:"label",children:["Slot capacity",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx(f,{options:B,value:B.find(a=>a.value===d("slotCapacity"))||null,onChange:a=>s("slotCapacity",(a==null?void 0:a.value)||"",{shouldValidate:!0}),placeholder:"Select Slot capacity",className:"form-control"}),t.slotCapacity&&e.jsx("span",{className:"error",children:t.slotCapacity.message})]})}),e.jsx("div",{className:"col-lg-4 col-md-6",children:e.jsxs("div",{className:"form-group forms-custom",children:[e.jsxs("label",{className:"label",children:["Max slots",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx(f,{options:n,value:n.find(a=>a.value===d("maxSlots"))||null,onChange:a=>s("maxSlots",(a==null?void 0:a.value)||"",{shouldValidate:!0}),placeholder:"Select Max slots",className:"form-control"}),t.maxSlots&&e.jsx("span",{className:"error",children:t.maxSlots.message})]})}),e.jsx("div",{className:"col-lg-4 col-md-6",children:e.jsxs("div",{className:"form-group forms-custom",children:[e.jsxs("label",{className:"label",children:["Booking allow from",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"date",className:"form-control",...r("bookingAllowFrom")}),t.bookingAllowFrom&&e.jsx("span",{className:"error",children:t.bookingAllowFrom.message})]})}),e.jsx("div",{className:"col-lg-4 col-md-6",children:e.jsxs("div",{className:"form-group forms-custom",children:[e.jsxs("label",{className:"label",children:["Booking allow till",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"date",className:"form-control",...r("bookingAllowTill")}),t.bookingAllowTill&&e.jsx("span",{className:"error",children:t.bookingAllowTill.message})]})}),e.jsx("div",{className:"col-lg-4 col-md-6",children:e.jsxs("div",{className:"form-group forms-custom",children:[e.jsx("label",{className:"label",children:"Blocked dates"}),e.jsx(P,{control:u,name:"blockedDates",render:({field:a})=>e.jsx(R,{className:"form-control",value:a.value,onChange:a.onChange})})]})}),e.jsx("div",{className:"col-lg-4 col-md-6",children:e.jsxs("div",{className:"form-group forms-custom",children:[e.jsx("label",{className:"label",children:"Release dates"}),e.jsx(P,{control:u,name:"releaseDates",render:({field:a})=>e.jsx(R,{className:"form-control",value:a.value,onChange:a.onChange})})]})}),e.jsx("div",{className:"col-lg-4 col-md-6",children:e.jsxs("div",{className:"form-group forms-custom",children:[e.jsx("label",{className:"label",children:"Slot full dates"}),e.jsx(P,{control:u,name:"slotFullDates",render:({field:a})=>e.jsx(R,{className:"form-control",value:a.value,onChange:a.onChange})})]})})]})}),V=()=>e.jsxs("div",{className:"modal-footer bottom-btn-sec",children:[e.jsx("button",{type:"button",className:"btn btn-cancel",onClick:p,children:"Cancel"}),e.jsx("button",{type:"button",className:"btn btn-submit",onClick:C(L),children:"Save"})]});return e.jsx(ne,{className:"modal fade category-modal appointment-settings-modal show",dialgName:"modal-dialog-scrollable",show:!!i,closeModal:p,body:q(),header:Y(),footer:V(),isLoading:!1})}const ke=()=>{var H;const{getAllAppointmentSettings:i,appointmentSettingsData:p,isAppointmentSettingsLoading:m,appointmentSettingsAction:r,appointmentSettingsActionLoading:C,appointmentSettingsNotification:t,appointmentSettingsNotifyLoading:s}=ie(o=>o),j={search:"",page:1,limit:10,fromDate:null,toDate:null,sortBy:"createdAt",sortOrder:"DESC"},[d,u]=l.useState(j),[T,N]=l.useState(!1),[A,b]=l.useState(!1),[M,S]=l.useState(!1),[I,B]=l.useState(!1),[n,v]=l.useState(null),x={data:[{id:1,country:"United States",mission:"Mission 1",center:"John Doe",applicationType:"Application 1",appointmentType:"Appointment 1"},{id:2,country:"United States",mission:"Mission 2",center:"John Doe",applicationType:"Application 2",appointmentType:"Appointment 2"},{id:3,country:"United States",mission:"Mission 3",center:"John Doe",applicationType:"Application 3",appointmentType:"Appointment 3"},{id:4,country:"United States",mission:"Mission 4",center:"John Doe",applicationType:"Application 4",appointmentType:"Appointment 4"}],pagination:{totalRecords:4}},L=()=>{},Y=l.useMemo(()=>re.debounce(o=>{u(h=>({...h,search:o,page:1}))},500),[]),q=o=>{u(h=>({...h,sortBy:o,sortOrder:h.sortOrder==="ASC"?"DESC":"ASC"}))},V=o=>{u(h=>({...h,page:o}))},a=o=>{u(h=>({...h,limit:o,page:1}))},g=o=>{v(o),N(!0)},y=()=>{if(n){N(!1);return}},D=o=>{v(o),b(!0)},O=o=>{v(o),S(!0)},F=()=>{if(n){b(!1);return}},E=()=>{if(n){S(!1);return}},X=de({onDeleteClick:D,onStatusClick:g,onUserNotify:O,showActions:!0}),Z=[{fieldName:"User Status",BE_keyName:"status",fieldType:"select",Options:[{label:"Active",value:1},{label:"Blocked",value:2}]},{fieldName:"Joined Date",fieldType:"dateRangeCombined",fromKey:"fromDate",toKey:"toDate"}],k=x;return e.jsxs(e.Fragment,{children:[e.jsx(ce,{addButton:{name:"Book",type:"button",action:()=>B(!0)},onSearch:Y,filterOptions:Z,submitFilter:o=>{const{fromDate:h,toDate:W,...z}=o;u(Q=>({...Q,...z,fromDate:h?_(h).format("YYYY-MM-DD"):null,toDate:W?_(W).format("YYYY-MM-DD"):null,page:1}))},clearOptions:()=>{u(j)}}),e.jsx(me,{pagination:{currentPage:d.page,limit:d.limit},count:((H=k==null?void 0:k.pagination)==null?void 0:H.totalRecords)||0,columns:X,data:(k==null?void 0:k.data)||[],isLoading:!1,onPageChange:V,setLimit:a,onSortChange:q}),I&&e.jsx(Ce,{showModal:I,closeModal:()=>B(!1),onRefreshAppointmentSettings:L}),T&&n&&e.jsx(U,{isLoading:!1,showModal:T,closeModal:()=>N(!1),message:`Are you sure you want to ${n.status===2?"Activate":"Block"} ${n==null?void 0:n.firstName} ?`,onCancel:()=>N(!1),onSubmit:y}),A&&n&&e.jsx(U,{isDelete:!0,isLoading:!1,showModal:A,closeModal:()=>b(!1),message:`Are you sure you want to delete ${n==null?void 0:n.firstName} ?`,onCancel:()=>b(!1),onSubmit:F}),M&&n&&e.jsx(U,{isLoading:!1,showModal:M,closeModal:()=>S(!1),message:`Are you sure you want to ${n!=null&&n.isNotificationEnabled?"Disable":"Enable"} notifications for ${n==null?void 0:n.firstName}?`,onCancel:()=>S(!1),onSubmit:E})]})};export{ke as default};
