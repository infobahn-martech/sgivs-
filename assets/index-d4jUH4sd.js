import{G as L,y as Z,z as j,u as v,s as Y,r as y,j as a,C as G,o as P,b as O,c as B,l as M,k as R,h,m as V,n as $,O as q,M as N,q as H,p as I}from"./index-B6NNw_D1.js";import{u as z}from"./CenterReducer-DLV82298.js";const J=s=>L.post("/application-mode",s),K=(s,d)=>L.put(`/application-mode/${s}`,d),Q=s=>L.get("/application-mode",{params:s}),U=s=>L.delete(`/application-mode/${s}`),A={postData:J,patchData:K,getData:Q,deleteData:U},W=Z(s=>({isLoading:!1,isLoadingGet:!1,isLoadingDelete:!1,errorMessage:"",successMessage:"",applicationModeData:null,postData:async(d,m)=>{var p,u,i,t,l,g,n,o;try{s({isLoading:!0});const{data:e}=await A.postData(d),{success:f}=j.getState();f(((u=(p=e==null?void 0:e.response)==null?void 0:p.data)==null?void 0:u.message)??(e==null?void 0:e.message)),s({successMessage:((t=(i=e==null?void 0:e.response)==null?void 0:i.data)==null?void 0:t.message)??(e==null?void 0:e.message),isLoading:!1}),m&&m()}catch(e){const{error:f}=j.getState();s({errorMessage:((g=(l=e==null?void 0:e.response)==null?void 0:l.data)==null?void 0:g.message)??(e==null?void 0:e.message),isLoading:!1}),f(((o=(n=e==null?void 0:e.response)==null?void 0:n.data)==null?void 0:o.message)??e.message)}},patchData:async(d,m)=>{var p,u,i,t,l,g,n,o;try{s({isLoading:!0});const{id:e,...f}=d,{data:r}=await A.patchData(e,f),{success:C}=j.getState();C(((u=(p=r==null?void 0:r.response)==null?void 0:p.data)==null?void 0:u.message)??(r==null?void 0:r.message)),m&&m(),s({successMessage:((t=(i=r==null?void 0:r.response)==null?void 0:i.data)==null?void 0:t.message)??(r==null?void 0:r.message),isLoading:!1})}catch(e){const{error:f}=j.getState();s({errorMessage:((g=(l=e==null?void 0:e.response)==null?void 0:l.data)==null?void 0:g.message)??(e==null?void 0:e.message),isLoading:!1}),f(((o=(n=e==null?void 0:e.response)==null?void 0:n.data)==null?void 0:o.message)??e.message)}},getData:async d=>{var m,p,u,i;try{s({isLoadingGet:!0});const{data:t}=await A.getData(d),l=t;s({applicationModeData:l==null?void 0:l.data,isLoadingGet:!1})}catch(t){const{error:l}=j.getState();s({errorMessage:((p=(m=t==null?void 0:t.response)==null?void 0:m.data)==null?void 0:p.message)??(t==null?void 0:t.message),isLoadingGet:!1}),l(((i=(u=t==null?void 0:t.response)==null?void 0:u.data)==null?void 0:i.message)??t.message)}},deleteData:async(d,m)=>{var p,u,i,t,l,g;try{s({isLoadingDelete:!0});const{data:n}=await A.deleteData(d),o=n;s({applicationModeData:o==null?void 0:o.data,successMessage:((u=(p=n==null?void 0:n.response)==null?void 0:p.data)==null?void 0:u.message)??(n==null?void 0:n.message),isLoadingDelete:!1}),m&&m()}catch(n){const{error:o}=j.getState();s({errorMessage:((t=(i=n==null?void 0:n.response)==null?void 0:i.data)==null?void 0:t.message)??(n==null?void 0:n.message),isLoadingDelete:!1}),o(((g=(l=n==null?void 0:n.response)==null?void 0:l.data)==null?void 0:g.message)??n.message)}}})),X=P({name:B().nonempty("Name is required").max(20,"Name must be 10 characters or less"),isEZPass:O().optional()});function _({showModal:s,closeModal:d,onRefreshCenter:m}){const{register:p,handleSubmit:u,formState:{errors:i},setValue:t,reset:l}=v({resolver:Y(X),defaultValues:{name:"",isEZPass:!1}}),{postData:g,patchData:n,isLoading:o}=z(x=>x);y.useEffect(()=>{s!=null&&s.id?(t("name",(s==null?void 0:s.name)||""),t("isEZPass",(s==null?void 0:s.isEZPass)||!1)):l()},[s==null?void 0:s.id]);const e=x=>{s!=null&&s.id?n({id:s.id,...x},()=>{m()}):g(x,()=>{m()}),d()},f=()=>a.jsxs(a.Fragment,{children:[a.jsx("h4",{className:"modal-title",children:s!=null&&s.id?"Edit Center":"Add Center"}),a.jsx("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:d})]}),r=()=>a.jsx(a.Fragment,{children:a.jsx("div",{className:"modal-body custom-scroll",children:a.jsx("div",{className:"row",children:a.jsx("div",{className:"col-12",children:a.jsxs("div",{className:"form-group",children:[a.jsxs("label",{htmlFor:"name",className:"form-label",children:["Name",a.jsx("span",{className:"text-danger",children:"*"})]}),a.jsx("input",{type:"text",id:"name",className:"form-control",autoComplete:"off",maxLength:20,...p("name")}),i.name&&a.jsx("span",{className:"error",children:i.name.message})]})})})})}),C=()=>a.jsx(a.Fragment,{children:a.jsxs("div",{className:"modal-footer bottom-btn-sec",children:[a.jsx("button",{type:"button",className:"btn btn-cancel",onClick:d,children:"Cancel"}),a.jsx("button",{type:"submit",className:"btn btn-submit",disabled:o,onClick:u(e),children:o?"Loading...":"Save"})]})});return a.jsx(G,{className:"modal fade category-mgmt-modal show",dialgName:"modal-dialog-scrollable",show:!!s,closeModal:d,body:r(),header:f(),footer:C(),isLoading:!1})}const ae=()=>{const{getData:s,applicationModeData:d,isLoadingGet:m,deleteData:p,isLoadingDelete:u}=W(c=>c),[i,t]=y.useState(!1),[l,g]=y.useState(!1),n={search:"",page:1,limit:10,fromDate:null,toDate:null,sortBy:"createdAt",sortOrder:"DESC",isExcelExport:"false"},[o,e]=y.useState(n),f={total:5,data:[{id:1,name:"Application Mode 1",createdAt:"2025-01-10T09:30:00Z"},{id:2,name:"Application Mode 2",createdAt:"2025-02-14T12:15:00Z"},{id:3,name:"Application Mode 3",createdAt:"2025-03-05T08:45:00Z"},{id:4,name:"Application Mode 4",createdAt:"2025-03-20T10:00:00Z"},{id:5,name:"Application Mode 5",createdAt:"2025-04-02T11:20:00Z"}]},r=()=>{g(!1),t(!1)};y.useEffect(()=>{},[o]);const C=c=>{e(D=>({...D,sortBy:c,sortOrder:D.sortOrder==="ASC"?"DESC":"ASC"}))},x=c=>a.jsxs(a.Fragment,{children:[a.jsx(N,{id:"edit",place:"bottom",content:"Edit",style:{backgroundColor:"#051a53"}}),a.jsx(N,{id:"delete",place:"bottom",content:"Delete",style:{backgroundColor:"#051a53"}}),a.jsx("img",{src:H,alt:"edit","data-tooltip-id":"edit",onClick:()=>g(c)}),a.jsx("img",{src:I,alt:"delete","data-tooltip-id":"delete",onClick:()=>t(c)})]}),E=[{name:"Name",selector:"name",contentClass:"user-pic"},{name:"Created Date",selector:"createdAt",cell:c=>a.jsx("span",{children:q(c==null?void 0:c.createdAt)})},{name:"Action",contentClass:"action-wrap",disableViewClick:!0,thclass:"actions-edit employee-actn-edit",cell:c=>x(c)}],k=y.useMemo(()=>M.debounce(c=>{e(D=>({...D,search:c,page:1}))},500),[]),F=()=>{{t(!1);return}},b=f;return a.jsxs(a.Fragment,{children:[a.jsx(R,{addButton:{name:"Add Mode",type:"button",action:()=>g(!0)},hideFilter:!0,onSearch:k,submitFilter:c=>{const{fromDate:D,toDate:S,...T}=c;e({...o,...T,fromDate:D?h(D).format("YYYY-MM-DD"):null,toDate:S?h(S).format("YYYY-MM-DD"):null,page:1})},clearOptions:()=>{e(n)}}),a.jsx(V,{pagination:{currentPage:o.page,limit:o.limit},count:(b==null?void 0:b.total)||0,columns:E,data:(b==null?void 0:b.data)||[],isLoading:!1,onPageChange:c=>e({...o,page:c}),setLimit:c=>e({...o,limit:c}),onSortChange:C,wrapClasses:"inventory-table-wrap"}),l&&a.jsx(_,{showModal:l,closeModal:()=>g(!1),onRefreshApplicationMode:r}),i&&a.jsx($,{isDelete:!0,isLoading:!1,showModal:i,closeModal:()=>t(!1),message:`Are you sure you want to delete this ${i==null?void 0:i.name}?`,onCancel:()=>t(!1),onSubmit:F})]})};export{ae as default};
