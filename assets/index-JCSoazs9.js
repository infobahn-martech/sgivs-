import{m as h,a as Y,r,l as L,j as i,e as M,f as j,h as c}from"./index-Cnxfy8I7.js";const O=()=>{var u;const{isRentalLoading:f,isExportLoading:p,successMessage:m,getUnMappedTransactions:C,unMappedtransactions:s}=h(e=>e);console.log(" unMappedtransactions",s);const{getAllUsersListByRole:E}=Y(e=>e),d={page:1,limit:10,search:"",sortOrder:"DESC",isEzPass:!0},[o,a]=r.useState(d);r.useEffect(()=>{m&&(g(),h.setState({successMessage:""}))},[m]),r.useEffect(()=>{E({role:2})},[]);const g=()=>{C(o)},D=e=>{a(t=>({...t,sortBy:e,sortOrder:t.sortOrder==="ASC"?"DESC":"ASC"}))},S=e=>{a(t=>({...t,page:e}))},T=e=>{a(t=>({...t,limit:e}))};r.useEffect(()=>{g()},[o]);const b=L.debounce(e=>{a(t=>({...t,search:e,page:1}))},500),x=(e,t)=>e?c.utc(e).format(t):"-",A=[{name:"Transaction Date",selector:"transactionDate",cell:e=>x(e==null?void 0:e.transactionDate,"MMMM D, YYYY"),titleClasses:"tw4"},{name:"Tag/Plate Number",selector:"tagPlateNumber",titleClasses:"tw2"},{name:"Agency",selector:"agency",titleClasses:"tw3"},{name:"Plaza Id",selector:"plazaId",titleClasses:"tw5"},{name:"Entry Time",selector:"entryTime",cell:e=>c(e==null?void 0:e.entryTime,"HH:mm:ss").format("hh:mm A"),titleClasses:"tw6"},{name:"Amount",selector:"amount",titleClasses:"tw6",colClassName:"balance-due",cell:e=>`$${(e==null?void 0:e.amount)||0}`}],R=[{fieldName:"Transaction Date",BE_keyName:"transactionDate",fieldType:"dateRange"}],P=e=>{const t={};Object.entries(e).forEach(([n,l])=>{(n.endsWith("_start")||n.endsWith("_end"))&&l?t[n]=c(l).format("YYYY-MM-DD"):n==="user"&&Array.isArray(l)?t[n]=l.filter(Boolean):t[n]=l}),a({...o,...t,page:"1"})};return i.jsxs(i.Fragment,{children:[i.jsx(M,{onSearch:b,exportLoading:p,filterOptions:R,submitFilter:P,clearOptions:()=>{a(d)}}),i.jsx(j,{pagination:{currentPage:o.page,limit:o.limit},count:(u=s==null?void 0:s.pagination)==null?void 0:u.totalRecords,columns:A,data:s==null?void 0:s.data,isLoading:f,onPageChange:S,setLimit:T,onSortChange:D,wrapClasses:"ezpass-table-wrap"})]})};export{O as default};
