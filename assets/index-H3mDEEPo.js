import{G as L,x as Y,y as D,b as G,r as b,j as t,n as O,l as Z,e as B,h as T,f as I,g as P,K as R,M as S,i as H}from"./index-HOmjZ3KE.js";import{e as V}from"./edit-iaQC2oZw.js";import{s as $,o as q,a as K}from"./zod-BfLuoEp2.js";const z=s=>L.post("/courier-type",s),J=(s,m)=>L.put(`/courier-type/${s}`,m),Q=s=>L.get("/courier-type",{params:s}),U=s=>L.delete(`/courier-type/${s}`),j={postData:z,patchData:J,getData:Q,deleteData:U},A=Y(s=>({isLoading:!1,isLoadingGet:!1,isLoadingDelete:!1,errorMessage:"",successMessage:"",courierTypeList:null,postData:async(m,d)=>{var u,p,c,a,i,g,n,o;try{s({isLoading:!0});const{data:e}=await j.postData(m),{success:f}=D.getState();f(((p=(u=e==null?void 0:e.response)==null?void 0:u.data)==null?void 0:p.message)??(e==null?void 0:e.message)),s({successMessage:((a=(c=e==null?void 0:e.response)==null?void 0:c.data)==null?void 0:a.message)??(e==null?void 0:e.message),isLoading:!1}),d&&d()}catch(e){const{error:f}=D.getState();s({errorMessage:((g=(i=e==null?void 0:e.response)==null?void 0:i.data)==null?void 0:g.message)??(e==null?void 0:e.message),isLoading:!1}),f(((o=(n=e==null?void 0:e.response)==null?void 0:n.data)==null?void 0:o.message)??e.message)}},patchData:async(m,d)=>{var u,p,c,a,i,g,n,o;try{s({isLoading:!0});const{id:e,...f}=m,{data:l}=await j.patchData(e,f),{success:y}=D.getState();y(((p=(u=l==null?void 0:l.response)==null?void 0:u.data)==null?void 0:p.message)??(l==null?void 0:l.message)),d&&d(),s({successMessage:((a=(c=l==null?void 0:l.response)==null?void 0:c.data)==null?void 0:a.message)??(l==null?void 0:l.message),isLoading:!1})}catch(e){const{error:f}=D.getState();s({errorMessage:((g=(i=e==null?void 0:e.response)==null?void 0:i.data)==null?void 0:g.message)??(e==null?void 0:e.message),isLoading:!1}),f(((o=(n=e==null?void 0:e.response)==null?void 0:n.data)==null?void 0:o.message)??e.message)}},getData:async m=>{var d,u,p,c;try{s({isLoadingGet:!0});const{data:a}=await j.getData(m),i=a;s({courierTypeList:i==null?void 0:i.data,isLoadingGet:!1})}catch(a){const{error:i}=D.getState();s({errorMessage:((u=(d=a==null?void 0:a.response)==null?void 0:d.data)==null?void 0:u.message)??(a==null?void 0:a.message),isLoadingGet:!1}),i(((c=(p=a==null?void 0:a.response)==null?void 0:p.data)==null?void 0:c.message)??a.message)}},deleteData:async(m,d)=>{var u,p,c,a,i,g;try{s({isLoadingDelete:!0});const{data:n}=await j.deleteData(m),o=n;s({courierTypeList:o==null?void 0:o.data,successMessage:((p=(u=n==null?void 0:n.response)==null?void 0:u.data)==null?void 0:p.message)??(n==null?void 0:n.message),isLoadingDelete:!1}),d&&d()}catch(n){const{error:o}=D.getState();s({errorMessage:((a=(c=n==null?void 0:n.response)==null?void 0:c.data)==null?void 0:a.message)??(n==null?void 0:n.message),isLoadingDelete:!1}),o(((g=(i=n==null?void 0:n.response)==null?void 0:i.data)==null?void 0:g.message)??n.message)}}})),W=q({name:K().nonempty("Name is required").max(20,"Name must be 10 characters or less")});function X({showModal:s,closeModal:m,onRefreshCourierType:d}){const{register:u,handleSubmit:p,formState:{errors:c},reset:a}=G({resolver:$(W),defaultValues:{name:""}}),{postData:i,patchData:g,isLoading:n}=A(y=>y);b.useEffect(()=>{s!=null&&s.id?a({name:(s==null?void 0:s.name)||""}):a()},[s==null?void 0:s.id]);const o=y=>{s!=null&&s.id?g({id:s.id,...y},()=>{d()}):i(y,()=>{d()}),m()},e=()=>t.jsxs(t.Fragment,{children:[t.jsx("h4",{className:"modal-title",children:s!=null&&s.id?"Edit Courier Type":"Add Courier Type"}),t.jsx("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:m})]}),f=()=>t.jsx(t.Fragment,{children:t.jsx("div",{className:"modal-body custom-scroll",children:t.jsx("div",{className:"row",children:t.jsx("div",{className:"col-12",children:t.jsxs("div",{className:"form-group",children:[t.jsxs("label",{htmlFor:"name",className:"form-label",children:["Name",t.jsx("span",{className:"text-danger",children:"*"})]}),t.jsx("input",{type:"text",id:"name",className:"form-control",autoComplete:"off",maxLength:20,...u("name")}),c.name&&t.jsx("span",{className:"error",children:c.name.message})]})})})})}),l=()=>t.jsx(t.Fragment,{children:t.jsxs("div",{className:"modal-footer bottom-btn-sec",children:[t.jsx("button",{type:"button",className:"btn btn-cancel",onClick:m,children:"Cancel"}),t.jsx("button",{type:"submit",className:"btn btn-submit",disabled:n,onClick:p(o),children:n?"Loading...":"Save"})]})});return t.jsx(O,{className:"modal fade category-mgmt-modal show",dialgName:"modal-dialog-scrollable",show:!!s,closeModal:m,body:f(),header:e(),footer:l(),isLoading:!1})}const se=()=>{const{getData:s,courierTypeData:m,isLoadingGet:d,deleteData:u,isLoadingDelete:p}=A(r=>r),[c,a]=b.useState(!1),[i,g]=b.useState(!1),n={search:"",page:1,limit:10,fromDate:null,toDate:null,sortBy:"createdAt",sortOrder:"DESC",isExcelExport:"false"},[o,e]=b.useState(n),f={total:5,data:[{id:1,name:"Courier Type 1",createdAt:"2025-01-10T09:30:00Z"},{id:2,name:"Courier Type 2",createdAt:"2025-02-14T12:15:00Z"},{id:3,name:"Courier Type 3",createdAt:"2025-03-05T08:45:00Z"},{id:4,name:"Courier Type 4",createdAt:"2025-03-20T10:00:00Z"},{id:5,name:"Courier Type 5",createdAt:"2025-04-02T11:20:00Z"}]},l=()=>{g(!1),a(!1)};b.useEffect(()=>{},[o]);const y=r=>{e(x=>({...x,sortBy:r,sortOrder:x.sortOrder==="ASC"?"DESC":"ASC"}))},N=r=>t.jsxs(t.Fragment,{children:[t.jsx(S,{id:"edit",place:"bottom",content:"Edit",style:{backgroundColor:"#051a53"}}),t.jsx(S,{id:"delete",place:"bottom",content:"Delete",style:{backgroundColor:"#051a53"}}),t.jsx("img",{src:V,alt:"edit","data-tooltip-id":"edit",onClick:()=>g(r)}),t.jsx("img",{src:H,alt:"delete","data-tooltip-id":"delete",onClick:()=>a(r)})]}),E=[{name:"Name",selector:"name",contentClass:"user-pic"},{name:"Created Date",selector:"createdAt",cell:r=>t.jsx("span",{children:R(r==null?void 0:r.createdAt)})},{name:"Action",contentClass:"action-wrap",disableViewClick:!0,thclass:"actions-edit employee-actn-edit",cell:r=>N(r)}],k=b.useMemo(()=>Z.debounce(r=>{e(x=>({...x,search:r,page:1}))},500),[]),F=()=>{{a(!1);return}},C=f;return t.jsxs(t.Fragment,{children:[t.jsx(B,{addButton:{name:"Add Item",type:"button",action:()=>g(!0)},hideFilter:!0,onSearch:k,submitFilter:r=>{const{fromDate:x,toDate:h,...v}=r;e({...o,...v,fromDate:x?T(x).format("YYYY-MM-DD"):null,toDate:h?T(h).format("YYYY-MM-DD"):null,page:1})},clearOptions:()=>{e(n)}}),t.jsx(I,{pagination:{currentPage:o.page,limit:o.limit},count:(C==null?void 0:C.total)||0,columns:E,data:(C==null?void 0:C.data)||[],isLoading:!1,onPageChange:r=>e({...o,page:r}),setLimit:r=>e({...o,limit:r}),onSortChange:y,wrapClasses:"inventory-table-wrap"}),i&&t.jsx(X,{showModal:i,closeModal:()=>g(!1),onRefreshCourierType:l}),c&&t.jsx(P,{isDelete:!0,isLoading:!1,showModal:c,closeModal:()=>a(!1),message:"Are you sure you want to delete this Courier Type?",onCancel:()=>a(!1),onSubmit:F})]})};export{se as default};
