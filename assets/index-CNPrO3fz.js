import{G as C,y as E,z as h,u as F,s as L,r as d,j as e,C as v,o as T,c as I,l as O,k as Y,h as N,m as G,O as k}from"./index-B6NNw_D1.js";const B=t=>C.get("/in-scan",{params:t}),Z={getData:B},A=E(t=>({isLoading:!1,isLoadingGet:!1,errorMessage:"",successMessage:"",inScanData:null,getData:async r=>{var m,p,l,n;try{t({isLoadingGet:!0});const{data:s}=await Z.getData(r),c=s;t({inScanData:c==null?void 0:c.data,isLoadingGet:!1})}catch(s){const{error:c}=h.getState();t({errorMessage:((p=(m=s==null?void 0:s.response)==null?void 0:m.data)==null?void 0:p.message)??(s==null?void 0:s.message),isLoadingGet:!1}),c(((n=(l=s==null?void 0:s.response)==null?void 0:l.data)==null?void 0:n.message)??s.message)}}})),P=T({applicationNumber:I().nonempty("Application Number is required").max(20,"Application Number must be 10 characters or less")});function R({showModal:t,closeModal:r,onRefreshInScan:m}){const{register:p,handleSubmit:l,formState:{errors:n},setValue:s,reset:c}=F({resolver:L(P),defaultValues:{applicationNumber:""}}),{postData:b,patchData:f,isLoading:g}=A(i=>i);d.useEffect(()=>{t!=null&&t.id?s("applicationNumber",(t==null?void 0:t.applicationNumber)||""):c()},[t==null?void 0:t.id]);const x=i=>{t!=null&&t.id?f({id:t.id,...i},()=>{m()}):b(i,()=>{m()}),r()},S=()=>e.jsxs(e.Fragment,{children:[e.jsx("h4",{className:"modal-title",children:t!=null&&t.id?"Edit In Scan":"Add In Scan"}),e.jsx("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:r})]}),y=()=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"modal-body custom-scroll",children:e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{htmlFor:"applicationNumber",className:"form-label",children:["Application Number",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"text",id:"applicationNumber",className:"form-control",autoComplete:"off",maxLength:20,...p("applicationNumber")}),n.applicationNumber&&e.jsx("span",{className:"error",children:n.applicationNumber.message})]})})})})}),u=()=>e.jsx(e.Fragment,{children:e.jsxs("div",{className:"modal-footer bottom-btn-sec",children:[e.jsx("button",{type:"button",className:"btn btn-cancel",onClick:r,children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-submit",disabled:g,onClick:l(x),children:g?"Loading...":"Save"})]})});return e.jsx(v,{className:"modal fade category-mgmt-modal show",dialgName:"modal-dialog-scrollable",show:!!t,closeModal:r,body:y(),header:S(),footer:u(),isLoading:!1})}const U=()=>{const{getData:r,inScanData:m,isLoadingGet:p}=A(a=>a),l={search:"",page:1,limit:10,fromDate:null,toDate:null,sortBy:"date",sortOrder:"DESC",isExcelExport:"false"},[n,s]=d.useState(l),[c,b]=d.useState(!1),[f,g]=d.useState(null),x={total:5,data:[{id:1,date:"2025-01-10T09:30:00Z",by:"Admin",totalApplication:12},{id:2,date:"2025-02-14T12:15:00Z",by:"Operator",totalApplication:7},{id:3,date:"2025-03-05T08:45:00Z",by:"Admin",totalApplication:19},{id:4,date:"2025-03-20T10:00:00Z",by:"Supervisor",totalApplication:5},{id:5,date:"2025-04-02T11:20:00Z",by:"Admin",totalApplication:9}]};d.useEffect(()=>{},[n,!0,r]);const S=a=>{s(o=>({...o,sortBy:a,sortOrder:o.sortOrder==="ASC"?"DESC":"ASC"}))},y=[{name:"Date",selector:"date",sortable:!0,sortField:"date",cell:a=>e.jsx("span",{children:a!=null&&a.date?k(a==null?void 0:a.date):"-"})},{name:"By",selector:"by",sortable:!0,sortField:"by"},{name:"Total Application",selector:"totalApplication",sortable:!0,sortField:"totalApplication",cell:a=>e.jsx("span",{children:(a==null?void 0:a.totalApplication)??0})}],u=d.useMemo(()=>O.debounce(a=>{s(o=>({...o,search:a,page:1}))},500),[]);d.useEffect(()=>()=>u.cancel(),[u]);const i=x;return e.jsxs(e.Fragment,{children:[e.jsx(Y,{addButton:{name:"Add Item",type:"button",action:()=>{b(!0),g(null)}},hideFilter:!0,onSearch:u,submitFilter:a=>{const{fromDate:o,toDate:j,...D}=a;s({...n,...D,fromDate:o?N(o).format("YYYY-MM-DD"):null,toDate:j?N(j).format("YYYY-MM-DD"):null,page:1})},clearOptions:()=>s(l)}),e.jsx(G,{pagination:{currentPage:n.page,limit:n.limit},count:(i==null?void 0:i.total)||0,columns:y,data:(i==null?void 0:i.data)||[],isLoading:!1,onPageChange:a=>s({...n,page:a}),setLimit:a=>s({...n,limit:a}),onSortChange:S,wrapClasses:"inventory-table-wrap"}),c&&e.jsx(R,{showModal:c,closeModal:()=>b(!1),onRefreshInScan:()=>r(n),selectedInScan:f})]})};export{U as default};
