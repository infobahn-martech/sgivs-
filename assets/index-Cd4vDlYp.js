import{G as _,x as ae,y as F,r as C,u as U,s as W,j as e,C as V,o as z,c as N,Y as le,b as G,$ as I,h as T,a0 as H,U as Z,l as te,k as ne,m as re,n as ie,K as ce}from"./index-NT2wBZmo.js";const oe=s=>_.post("passport-application",s),me=s=>_.get("passport-application",{params:s}),de=(s,r)=>_.patch(`passport-application/${s}`,r),pe=s=>_.delete(`passport-application/${s}`),Y={getPassportApplications:me,createPassportApplication:oe,updatePassportApplication:de,deletePassportApplication:pe},J=ae(s=>({isCreatePassportApplicationLoading:!1,isUpdatePassportApplicationLoading:!1,isDeletePassportApplicationLoading:!1,errorMessage:"",successMessage:"",passportApplicationsData:[],isLoadingGet:!1,pagination:{},createPassportApplication:async r=>{var t,h,u,i,j,o;try{s({isCreatePassportApplicationLoading:!0});const{data:d}=await Y.createPassportApplication(d);s({isCreatePassportApplicationLoading:!1});const{success:l}=F.getState();l(((h=(t=d==null?void 0:d.response)==null?void 0:t.data)==null?void 0:h.message)??(d==null?void 0:d.message))}catch(d){const{error:l}=F.getState();s({errorMessage:((i=(u=d==null?void 0:d.response)==null?void 0:u.data)==null?void 0:i.message)??(d==null?void 0:d.message),isCreatePassportApplicationLoading:!1}),l(((o=(j=d==null?void 0:d.response)==null?void 0:j.data)==null?void 0:o.message)??d.message)}},updatePassportApplication:async(r,t)=>{var h,u,i,j,o,d,l,a;try{s({isUpdatePassportApplicationLoading:!0});const{data:c}=await Y.updatePassportApplication(r,c),{success:g}=F.getState();g(((u=(h=c==null?void 0:c.response)==null?void 0:h.data)==null?void 0:u.message)??(c==null?void 0:c.message)),s({successMessage:((j=(i=c==null?void 0:c.response)==null?void 0:i.data)==null?void 0:j.message)??(c==null?void 0:c.message),isUpdatePassportApplicationLoading:!1})}catch(c){const{error:g}=F.getState();s({errorMessage:((d=(o=c==null?void 0:c.response)==null?void 0:o.data)==null?void 0:d.message)??(c==null?void 0:c.message),isDeletePassportApplicationLoading:!1}),g(((a=(l=c==null?void 0:c.response)==null?void 0:l.data)==null?void 0:a.message)??c.message)}},deletePassportApplication:async r=>{var t,h,u,i,j,o,d,l;try{s({isDeletePassportApplicationLoading:!0});const{data:a}=await Y.deletePassportApplication(r),{success:c}=F.getState();c(((h=(t=a==null?void 0:a.response)==null?void 0:t.data)==null?void 0:h.message)??(a==null?void 0:a.message)),s({successMessage:((i=(u=a==null?void 0:a.response)==null?void 0:u.data)==null?void 0:i.message)??(a==null?void 0:a.message),isDeletePassportApplicationLoading:!1})}catch(a){const{error:c}=F.getState();s({errorMessage:((o=(j=a==null?void 0:a.response)==null?void 0:j.data)==null?void 0:o.message)??(a==null?void 0:a.message),isDeletePassportApplicationLoading:!1}),c(((l=(d=a==null?void 0:a.response)==null?void 0:d.data)==null?void 0:l.message)??a.message)}},getPassportApplications:async r=>{var t,h;try{s({isLoadingGet:!0});const{data:u}=await Y.getPassportApplications(r),i=u==null?void 0:u.data;s({passportApplicationsData:i,isLoadingGet:!1,pagination:u==null?void 0:u.pagination})}catch(u){const{error:i}=F.getState();s({isLoadingGet:!1,passportApplicationsData:[],pagination:{}}),i(((h=(t=u==null?void 0:u.response)==null?void 0:t.data)==null?void 0:h.message)??u.message)}}})),ue=[{value:"Yes",label:"Yes"},{value:"No",label:"No"}],xe=[{value:"Cash",label:"Cash"},{value:"Card",label:"Credit card / Debit card"},{value:"POS",label:"Other POS Transaction"}],Ne=[{value:"New",label:"New"},{value:"Renewal",label:"Renewal"},{value:"Reissue",label:"Reissue"}],je=[{value:"Self",label:"Self"},{value:"Agent",label:"Agent"},{value:"Representative",label:"Representative"}],he=[{value:"Normal",label:"Normal"},{value:"Tatkal",label:"Tatkal"},{value:"Courier",label:"Courier"}],ve=[{value:"A",label:"A"},{value:"B",label:"B"},{value:"C",label:"C"}],be=[{value:"Male",label:"Male"},{value:"Female",label:"Female"},{value:"Other",label:"Other"}],ge=[{value:"+971",label:"+971 (UAE)"},{value:"+91",label:"+91 (India)"},{value:"+44",label:"+44 (UK)"},{value:"+1",label:"+1 (USA)"}],fe=[{value:"Photocopy",label:"Photocopy"},{value:"Photograph",label:"Photograph"},{value:"FormFilling",label:"Form Filling"},{value:"SMS",label:"SMS"}],ye=z({appointmentPostalRefNo:N().nonempty("Appointment/Postal Reference Number is required").max(50),applicationType:N().nonempty("Application Type is required"),applicationBy:N().nonempty("Application By is required"),arnNo:N().nonempty("ARN Number is required").max(50),processedInGPSPV2:N().nonempty("Processed in GPSP V2.0? is required"),serviceRequested:N().nonempty("Service Requested is required"),token:N().nonempty("Token is required"),firstName:N().nonempty("First Name is required").max(50),lastName:N().nonempty("Last Name is required").max(50),dob:N().nonempty("Date of Birth is required"),gender:N().nonempty("Gender is required"),mobileCode:N().nonempty("Code is required"),mobileNumber:N().nonempty("Mobile Number is required").max(20).regex(/^[0-9]+$/,"Mobile Number must be digits only"),email:N().nonempty("Email is required").email("Invalid email format"),oldPassportNo:N().nonempty("Old Passport Number is required").max(30),parentSpouseName:N().nonempty("Father/Mother/Spouse name is required").max(80),returnCourierAddress:N().nonempty("Return courier address is required").max(400),courierRequired:G().optional(),residenceCountry:N().optional(),addressLine1:N().optional(),state:N().optional(),city:N().optional(),tatkalService:G().optional(),afs:le(N()).optional(),paymentMode:N().nonempty("Payment Mode is required")}).superRefine((s,r)=>{s.courierRequired&&(s.residenceCountry||r.addIssue({code:I.custom,path:["residenceCountry"],message:"Residence Country is required"}),s.addressLine1||r.addIssue({code:I.custom,path:["addressLine1"],message:"Address line 1 is required"}),s.state||r.addIssue({code:I.custom,path:["state"],message:"State is required"}),s.city||r.addIssue({code:I.custom,path:["city"],message:"City is required"}))});function Ce({showModal:s,closeModal:r,onRefreshPassportApplications:t}){const{postData:h,patchData:u,isLoading:i}=J(x=>x),j=C.useMemo(()=>({appointmentPostalRefNo:"",applicationType:"",applicationBy:"",arnNo:"",processedInGPSPV2:"",serviceRequested:"",token:"",firstName:"",lastName:"",dob:"",gender:"",mobileCode:"+971",mobileNumber:"",email:"",oldPassportNo:"",parentSpouseName:"",returnCourierAddress:"",courierRequired:!1,residenceCountry:"",addressLine1:"",state:"",city:"",tatkalService:!1,afs:[],paymentMode:""}),[]),{register:o,handleSubmit:d,formState:{errors:l},setValue:a,reset:c,watch:g}=U({resolver:W(ye),defaultValues:j,mode:"onSubmit"}),v=g("courierRequired"),p=g("afs")||[];C.useEffect(()=>{s!=null&&s.id?c({...j,...s,courierRequired:!!(s!=null&&s.courierRequired),tatkalService:!!(s!=null&&s.tatkalService),afs:Array.isArray(s==null?void 0:s.afs)?s==null?void 0:s.afs:[],mobileCode:(s==null?void 0:s.mobileCode)||"+971"}):c(j)},[s==null?void 0:s.id]);const y=x=>{const f={...x,...x.courierRequired?{}:{residenceCountry:"",addressLine1:"",state:"",city:""}};if(s!=null&&s.id){u({id:s.id,...f},()=>{t==null||t(),r==null||r()});return}h(f,()=>{t==null||t(),r==null||r()})},R=x=>{if(x.target.checked){if(!window.confirm("Courier is required. Do you want to enter courier delivery details now?")){a("courierRequired",!1,{shouldValidate:!0});return}a("courierRequired",!0,{shouldValidate:!0});return}a("courierRequired",!1,{shouldValidate:!0}),a("residenceCountry","",{shouldValidate:!0}),a("addressLine1","",{shouldValidate:!0}),a("state","",{shouldValidate:!0}),a("city","",{shouldValidate:!0})},b=x=>{const f=new Set(p);f.has(x)?f.delete(x):f.add(x),a("afs",Array.from(f),{shouldValidate:!0})},A=()=>e.jsxs(e.Fragment,{children:[e.jsx("h4",{className:"modal-title",children:s!=null&&s.id?"Edit Passport Application":"Add Passport Application"}),e.jsx("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:r})]}),P=()=>{var x,f;return e.jsxs("div",{className:"modal-body custom-scroll",children:[e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Appointment / Postal Reference Number ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"text",className:"form-control",autoComplete:"off",maxLength:50,...o("appointmentPostalRefNo")}),l.appointmentPostalRefNo&&e.jsx("span",{className:"error",children:l.appointmentPostalRefNo.message})]})}),e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Application Type ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("select",{className:"form-control",...o("applicationType"),children:[e.jsx("option",{value:"",children:"Select"}),Ne.map(m=>e.jsx("option",{value:m.value,children:m.label},m.value))]}),l.applicationType&&e.jsx("span",{className:"error",children:l.applicationType.message})]})})]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Application By ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("select",{className:"form-control",...o("applicationBy"),children:[e.jsx("option",{value:"",children:"Select"}),je.map(m=>e.jsx("option",{value:m.value,children:m.label},m.value))]}),l.applicationBy&&e.jsx("span",{className:"error",children:l.applicationBy.message})]})}),e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["ARN Number (Embassy Reference Number) ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"text",className:"form-control",autoComplete:"off",maxLength:50,...o("arnNo")}),l.arnNo&&e.jsx("span",{className:"error",children:l.arnNo.message})]})})]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-4",children:e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Processed in GPSP V2.0? ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("select",{className:"form-control",...o("processedInGPSPV2"),children:[e.jsx("option",{value:"",children:"Select"}),ue.map(m=>e.jsx("option",{value:m.value,children:m.label},m.value))]}),l.processedInGPSPV2&&e.jsx("span",{className:"error",children:l.processedInGPSPV2.message})]})}),e.jsx("div",{className:"col-md-4",children:e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Service Requested ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("select",{className:"form-control",...o("serviceRequested"),children:[e.jsx("option",{value:"",children:"Select"}),he.map(m=>e.jsx("option",{value:m.value,children:m.label},m.value))]}),l.serviceRequested&&e.jsx("span",{className:"error",children:l.serviceRequested.message})]})}),e.jsx("div",{className:"col-md-4",children:e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Token ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("select",{className:"form-control",...o("token"),children:[e.jsx("option",{value:"",children:"Select"}),ve.map(m=>e.jsx("option",{value:m.value,children:m.label},m.value))]}),l.token&&e.jsx("span",{className:"error",children:l.token.message})]})})]}),e.jsx("hr",{}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["First Name ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"text",className:"form-control",autoComplete:"off",maxLength:50,...o("firstName")}),l.firstName&&e.jsx("span",{className:"error",children:l.firstName.message})]})}),e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Last Name ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"text",className:"form-control",autoComplete:"off",maxLength:50,...o("lastName")}),l.lastName&&e.jsx("span",{className:"error",children:l.lastName.message})]})})]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-4",children:e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Date of Birth ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"date",className:"form-control",...o("dob")}),l.dob&&e.jsx("span",{className:"error",children:l.dob.message})]})}),e.jsx("div",{className:"col-md-4",children:e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Gender ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("select",{className:"form-control",...o("gender"),children:[e.jsx("option",{value:"",children:"Select"}),be.map(m=>e.jsx("option",{value:m.value,children:m.label},m.value))]}),l.gender&&e.jsx("span",{className:"error",children:l.gender.message})]})}),e.jsx("div",{className:"col-md-4",children:e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Old Passport Number ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"text",className:"form-control",autoComplete:"off",maxLength:30,...o("oldPassportNo")}),l.oldPassportNo&&e.jsx("span",{className:"error",children:l.oldPassportNo.message})]})})]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Mobile Number ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("div",{className:"d-flex gap-2",children:[e.jsx("select",{className:"form-control",style:{maxWidth:160},...o("mobileCode"),children:ge.map(m=>e.jsx("option",{value:m.value,children:m.label},m.value))}),e.jsx("input",{type:"text",className:"form-control",autoComplete:"off",maxLength:20,...o("mobileNumber")})]}),(l.mobileCode||l.mobileNumber)&&e.jsx("span",{className:"error",children:((x=l.mobileCode)==null?void 0:x.message)||((f=l.mobileNumber)==null?void 0:f.message)})]})}),e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Email ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"email",className:"form-control",autoComplete:"off",...o("email")}),l.email&&e.jsx("span",{className:"error",children:l.email.message})]})})]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Father/Mother/Spouse name (For courier delivery) ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"text",className:"form-control",autoComplete:"off",maxLength:80,...o("parentSpouseName")}),l.parentSpouseName&&e.jsx("span",{className:"error",children:l.parentSpouseName.message})]})}),e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Payment Mode ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("select",{className:"form-control",...o("paymentMode"),children:[e.jsx("option",{value:"",children:"Select"}),xe.map(m=>e.jsx("option",{value:m.value,children:m.label},m.value))]}),l.paymentMode&&e.jsx("span",{className:"error",children:l.paymentMode.message})]})})]}),e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Return courier address filled by applicant ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("textarea",{className:"form-control",rows:3,...o("returnCourierAddress")}),l.returnCourierAddress&&e.jsx("span",{className:"error",children:l.returnCourierAddress.message})]})})}),e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"form-group d-flex align-items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"courierRequired",checked:!!v,onChange:R}),e.jsx("label",{htmlFor:"courierRequired",className:"form-label mb-0",children:"Courier required"})]})})}),v&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Residence Country ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"text",className:"form-control",autoComplete:"off",...o("residenceCountry")}),l.residenceCountry&&e.jsx("span",{className:"error",children:l.residenceCountry.message})]})}),e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Address line 1 ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"text",className:"form-control",autoComplete:"off",...o("addressLine1")}),l.addressLine1&&e.jsx("span",{className:"error",children:l.addressLine1.message})]})})]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["State ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"text",className:"form-control",autoComplete:"off",...o("state")}),l.state&&e.jsx("span",{className:"error",children:l.state.message})]})}),e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["City ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"text",className:"form-control",autoComplete:"off",...o("city")}),l.city&&e.jsx("span",{className:"error",children:l.city.message})]})})]})]}),e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"form-group d-flex align-items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"tatkalService",...o("tatkalService")}),e.jsx("label",{htmlFor:"tatkalService",className:"form-label mb-0",children:"Tatkal Service"})]})})}),e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Application Facilitation Services (AFS) - multiple selection"}),e.jsx("div",{className:"d-flex flex-wrap gap-3",children:fe.map(m=>e.jsxs("div",{className:"d-flex align-items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:`afs_${m.value}`,checked:p.includes(m.value),onChange:()=>b(m.value)}),e.jsx("label",{htmlFor:`afs_${m.value}`,className:"mb-0",children:m.label})]},m.value))}),l.afs&&e.jsx("span",{className:"error",children:l.afs.message})]})})})]})},q=()=>e.jsxs("div",{className:"modal-footer bottom-btn-sec",children:[e.jsx("button",{type:"button",className:"btn btn-cancel",onClick:r,children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-submit",disabled:i,onClick:d(y),children:i?"Loading...":"Save"})]});return e.jsx(V,{className:"modal fade passport-application-modal show",dialgName:"modal-dialog-scrollable",show:!!s,closeModal:r,body:P(),header:A(),footer:q(),isLoading:!1})}const Se=({row:s,onPrintReceipt:r,onPrintBarcode:t,onViewApplication:h,onComment:u,onActivityLog:i,onEditApplication:j,onChangeServiceFee:o,onDelete:d})=>{const[l,a]=C.useState(!1),c=C.useRef(null);C.useEffect(()=>{const p=y=>{c.current&&(c.current.contains(y.target)||a(!1))};return document.addEventListener("mousedown",p),()=>document.removeEventListener("mousedown",p)},[]);const g=p=>{p.stopPropagation(),a(y=>!y)},v=(p,y)=>{p.stopPropagation(),a(!1),y==null||y(s)};return e.jsxs("div",{className:"action-menu",ref:c,onClick:p=>p.stopPropagation(),children:[e.jsx("button",{type:"button",className:"action-menu__btn",onClick:g,"aria-label":"More actions",children:"⋮"}),l&&e.jsxs("div",{className:"action-menu__dropdown",children:[e.jsx("button",{type:"button",onClick:p=>v(p,r),children:"Print Receipt"}),e.jsx("button",{type:"button",onClick:p=>v(p,t),children:"Print Barcode"}),e.jsx("button",{type:"button",onClick:p=>v(p,h),children:"View Application"}),e.jsx("button",{type:"button",onClick:p=>v(p,u),children:"Comment"}),e.jsx("button",{type:"button",onClick:p=>v(p,i),children:"Activity Log"}),e.jsx("button",{type:"button",onClick:p=>v(p,j),children:"Edit application"}),e.jsx("button",{type:"button",onClick:p=>v(p,o),children:"Change service/fee"}),e.jsx("div",{className:"action-menu__divider"}),e.jsx("button",{type:"button",className:"danger",onClick:p=>v(p,d),children:"Delete"})]})]})},S=s=>s!=null&&s!==""?String(s):"—";function Ae({showModal:s,closeModal:r}){const t=s||{},h=S(t.referenceNo),u=t.createdAt?T(t.createdAt).format("YYYY-MM-DD HH:mm:ss"):"—",i=S(t.firstName??(t.name?t.name.split(" ")[0]:"")),j=S(t.lastName??(t.name?t.name.split(" ").slice(1).join(" "):"")),o=S(t.dob),d=S(t.oldPassportNo??t.ppNo),l=S(t.email),a=S(t.mobileNumber?[t.mobileCode,t.mobileNumber].filter(Boolean).join(" "):t.contact),c=S(t.passportType??[t.applicationType,t.serviceName].filter(Boolean).join(" ")),g=S(t.addressLine1),v=S(t.addressLine2),p=S(t.state),y=S(t.city),R=S(t.residenceCountry),b=S(t.postalCode),A=t.smsTimestamp??t.createdAt,P=t.smsMessage??(h!=="—"&&t.arn?`Your passport application (Ref #: ${t.referenceNo}) / (ARN #: ${t.arn}) is received at SGIVS ICAC, Salalah on ${t.createdAt?T(t.createdAt).format("DD-MM-YYYY"):"—"}`:"—"),q=()=>e.jsxs(e.Fragment,{children:[e.jsx("h4",{className:"modal-title",children:"View Passport Application"}),e.jsx("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:r})]}),x=({label:E,value:D})=>e.jsxs("div",{className:"view-modal-field",children:[e.jsx("span",{className:"view-modal-label",children:E}),e.jsx("span",{className:"view-modal-value",children:D})]}),f=({title:E,icon:D,children:$})=>e.jsxs("div",{className:"view-modal-section",children:[e.jsxs("div",{className:"view-modal-section-header",children:[D&&e.jsx("span",{className:"view-modal-section-icon","aria-hidden":"true",children:D}),e.jsx("span",{className:"view-modal-section-title",children:E})]}),e.jsx("div",{className:"view-modal-section-body",children:$})]}),m=()=>e.jsxs("div",{className:"modal-body custom-scroll view-modal-body",children:[e.jsxs(f,{title:"Personal Details",icon:e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),e.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),children:[e.jsxs("div",{className:"view-modal-grid view-modal-grid--two-cols",children:[e.jsx(x,{label:"Reference No:",value:h}),e.jsx(x,{label:"Applied On:",value:u}),e.jsx(x,{label:"First Name:",value:i}),e.jsx(x,{label:"Last Name:",value:j}),e.jsx(x,{label:"Date Of Birth:",value:o}),e.jsx(x,{label:"Email:",value:l}),e.jsx(x,{label:"Passport Number:",value:d}),e.jsx(x,{label:"Contact:",value:a})]}),e.jsx("div",{className:"view-modal-grid view-modal-grid--full",children:e.jsx(x,{label:"Passport Type:",value:c})})]}),e.jsx(f,{title:"Parents / Address Details",icon:e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),e.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),children:e.jsxs("div",{className:"view-modal-grid view-modal-grid--two-cols",children:[e.jsx(x,{label:"Home Address Line1:",value:g}),e.jsx(x,{label:"Home Address Line2:",value:v}),e.jsx(x,{label:"State:",value:p}),e.jsx(x,{label:"City:",value:y}),e.jsx(x,{label:"Country:",value:R}),e.jsx(x,{label:"Postal Code:",value:b})]})}),e.jsx(f,{title:"SMS Details",icon:e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),e.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),children:e.jsxs("div",{className:"view-modal-sms",children:[e.jsxs("div",{className:"view-modal-sms-meta",children:[e.jsx("span",{className:"view-modal-sms-brand",children:"SGIVS"}),e.jsx("span",{className:"view-modal-sms-time",children:A?T(A).format("DD MMM, YYYY h:mm A"):"—"})]}),e.jsx("p",{className:"view-modal-sms-message",children:P})]})})]});return e.jsx(V,{className:"modal fade passport-application-modal show",dialgName:"modal-dialog-scrollable",show:!!s,closeModal:r,body:m(),header:q()})}const Pe=z({comment:N().nonempty("Comment is required")});function ke({showModal:s,closeModal:r,onRefreshCenter:t}){const{register:h,handleSubmit:u,formState:{errors:i},setValue:j,reset:o}=U({resolver:W(Pe)}),[d,l]=C.useState((s==null?void 0:s.comment)??""),a=p=>{console.log(p)},c=()=>e.jsxs(e.Fragment,{children:[e.jsx("h4",{className:"modal-title",children:"Comment Passport Application"}),e.jsx("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:r})]}),g=()=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"modal-body custom-scroll",children:e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"comment",className:"form-label",children:"Comment"}),e.jsx("textarea",{id:"comment",className:"form-control",rows:4,placeholder:"Enter your comment here",value:d,onChange:p=>l(p.target.value)})]})})})})}),v=()=>e.jsx(e.Fragment,{children:e.jsxs("div",{className:"modal-footer bottom-btn-sec",children:[e.jsx("button",{type:"button",className:"btn btn-cancel",onClick:r,children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-submit",onClick:u(a),children:"Save"})]})});return e.jsx(V,{className:"modal fade category-mgmt-modal show",dialgName:"modal-dialog-scrollable",show:!!s,closeModal:r,body:g(),header:c(),footer:v(),isLoading:!1})}const Re=z({serviceId:N().nonempty("Service is required"),referenceNo:N().nonempty("Reference No is required"),applicantName:N().nonempty("Applicant Name is required"),govtFee:H(s=>s===""||s===null||s===void 0?void 0:Number(s),Z({invalid_type_error:"Govt Fee is required"}).min(0,"Govt Fee must be 0 or more")),icwf:H(s=>s===""||s===null||s===void 0?void 0:Number(s),Z({invalid_type_error:"ICWF is required"}).min(0,"ICWF must be 0 or more")),sgivsServiceFee:H(s=>s===""||s===null||s===void 0?void 0:Number(s),Z({invalid_type_error:"SGIVS Service Fee is required"}).min(0,"SGIVS Service Fee must be 0 or more")),isTatkal:G().optional(),cancelApplication:G().optional(),cancelReason:N().optional(),remark:N().optional()}).superRefine((s,r)=>{s.cancelApplication&&(!s.cancelReason||!s.cancelReason.trim())&&r.addIssue({code:I.custom,path:["cancelReason"],message:"Cancel reason is required"})});function Fe({showModal:s,closeModal:r,onRefreshPassportApplications:t}){const h=[{value:"normal",label:"Normal Service"},{value:"premium",label:"Premium"},{value:"express",label:"Express"}],u=[{value:"wrong_details",label:"Entered wrong details"},{value:"duplicate",label:"Duplicate application"},{value:"not_required",label:"Not required now"},{value:"other",label:"Other"}],{register:i,handleSubmit:j,reset:o,watch:d,control:l,formState:{errors:a},setValue:c}=U({resolver:W(Re),defaultValues:{serviceId:"",referenceNo:"",applicantName:"",govtFee:"",icwf:"",sgivsServiceFee:"",isTatkal:!1,cancelApplication:!1,cancelReason:"",remark:""},mode:"onSubmit"}),g=d("cancelApplication");C.useEffect(()=>{s&&o({serviceId:(s==null?void 0:s.serviceId)??"",referenceNo:(s==null?void 0:s.referenceNo)??"",applicantName:(s==null?void 0:s.applicantName)??"",govtFee:(s==null?void 0:s.govtFee)??"",icwf:(s==null?void 0:s.icwf)??"",sgivsServiceFee:(s==null?void 0:s.sgivsServiceFee)??"",isTatkal:!!(s!=null&&s.isTatkal),cancelApplication:!!(s!=null&&s.cancelApplication),cancelReason:(s==null?void 0:s.cancelReason)??"",remark:(s==null?void 0:s.remark)??""})},[s,o]);const v=b=>{console.log("Change Service/Fee Payload:",b),t==null||t(),r==null||r()},p=()=>e.jsxs(e.Fragment,{children:[e.jsx("h4",{className:"modal-title",children:"Change Service / Fee"}),e.jsx("button",{type:"button",className:"btn-close","aria-label":"Close",onClick:r})]}),y=()=>e.jsx("div",{className:"modal-body custom-scroll",children:e.jsxs("div",{className:"row g-3",children:[e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Service"}),e.jsxs("select",{className:"form-select",...i("serviceId"),children:[e.jsx("option",{value:"",children:"Select Service"}),h.map(b=>e.jsx("option",{value:b.value,children:b.label},b.value))]}),(a==null?void 0:a.serviceId)&&e.jsx("p",{className:"text-danger mt-1",children:a.serviceId.message})]})}),e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Reference No"}),e.jsx("input",{type:"text",className:"form-control",placeholder:"REF-0001",...i("referenceNo")}),(a==null?void 0:a.referenceNo)&&e.jsx("p",{className:"text-danger mt-1",children:a.referenceNo.message})]})}),e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Applicant Name"}),e.jsx("input",{type:"text",className:"form-control",placeholder:"Enter applicant name",...i("applicantName")}),(a==null?void 0:a.applicantName)&&e.jsx("p",{className:"text-danger mt-1",children:a.applicantName.message})]})}),e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Govt Fee"}),e.jsx("input",{type:"number",className:"form-control",placeholder:"0",...i("govtFee")}),(a==null?void 0:a.govtFee)&&e.jsx("p",{className:"text-danger mt-1",children:a.govtFee.message})]})}),e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"ICWF"}),e.jsx("input",{type:"number",className:"form-control",placeholder:"0",...i("icwf")}),(a==null?void 0:a.icwf)&&e.jsx("p",{className:"text-danger mt-1",children:a.icwf.message})]})}),e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"SGIVS Service Fee"}),e.jsx("input",{type:"number",className:"form-control",placeholder:"0",...i("sgivsServiceFee")}),(a==null?void 0:a.sgivsServiceFee)&&e.jsx("p",{className:"text-danger mt-1",children:a.sgivsServiceFee.message})]})}),e.jsx("div",{className:"col-md-6",children:e.jsx("div",{className:"form-group mt-2",children:e.jsxs("div",{className:"form-check",children:[e.jsx("input",{className:"form-check-input",type:"checkbox",id:"isTatkal",...i("isTatkal")}),e.jsx("label",{className:"form-check-label",htmlFor:"isTatkal",children:"Tatkal Service"})]})})}),e.jsx("div",{className:"col-md-6",children:e.jsx("div",{className:"form-group mt-2",children:e.jsxs("div",{className:"form-check",children:[e.jsx("input",{className:"form-check-input",type:"checkbox",id:"cancelApplication",...i("cancelApplication"),onChange:b=>{c("cancelApplication",b.target.checked),b.target.checked||c("cancelReason","")}}),e.jsx("label",{className:"form-check-label",htmlFor:"cancelApplication",children:"Do you want to cancel your application?"})]})})}),g&&e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Select reason"}),e.jsxs("select",{className:"form-select",...i("cancelReason"),children:[e.jsx("option",{value:"",children:"Select Reason"}),u.map(b=>e.jsx("option",{value:b.value,children:b.label},b.value))]}),(a==null?void 0:a.cancelReason)&&e.jsx("p",{className:"text-danger mt-1",children:a.cancelReason.message})]})}),e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Remark"}),e.jsx("textarea",{rows:4,className:"form-control",placeholder:"Enter remark",...i("remark")}),(a==null?void 0:a.remark)&&e.jsx("p",{className:"text-danger mt-1",children:a.remark.message})]})})]})}),R=()=>e.jsxs("div",{className:"modal-footer bottom-btn-sec",children:[e.jsx("button",{type:"button",className:"btn btn-cancel",onClick:r,children:"Cancel"}),e.jsx("button",{type:"button",className:"btn btn-submit",onClick:j(v),children:"Save"})]});return e.jsx(V,{className:"modal fade change-services-modal show",dialgName:"modal-dialog-scrollable",show:!!s,closeModal:r,body:y(),header:p(),footer:R(),isLoading:!1})}function De({showModal:s,closeModal:r}){const t=[{id:1,user:"Admin",action:"Created Passport Application",date:"11 Feb 2026",time:"10:30 AM",status:"Success"},{id:2,user:"Dany",action:"Updated Applicant Details",date:"10 Feb 2026",time:"02:15 PM",status:"Success"},{id:3,user:"Supervisor",action:"Deleted Duplicate Entry",date:"09 Feb 2026",time:"12:05 PM",status:"Warning"}],h=()=>e.jsxs(e.Fragment,{children:[e.jsx("h4",{className:"modal-title",children:"Activity Log"}),e.jsx("button",{type:"button",className:"btn-close","aria-label":"Close",onClick:r})]}),u=()=>e.jsx("div",{className:"modal-body custom-scroll",children:e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-hover align-middle",children:[e.jsx("thead",{className:"table-light",children:e.jsxs("tr",{children:[e.jsx("th",{children:"#"}),e.jsx("th",{children:"User"}),e.jsx("th",{children:"Action"}),e.jsx("th",{children:"Date"}),e.jsx("th",{children:"Time"}),e.jsx("th",{children:"Status"})]})}),e.jsx("tbody",{children:t.length>0?t.map((i,j)=>e.jsxs("tr",{children:[e.jsx("td",{children:j+1}),e.jsx("td",{children:i.user}),e.jsx("td",{children:i.action}),e.jsx("td",{children:i.date}),e.jsx("td",{children:i.time}),e.jsx("td",{children:e.jsx("span",{className:`badge ${i.status==="Success"?"bg-success":"bg-warning text-dark"}`,children:i.status})})]},i.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"text-center py-4",children:"No Activity Found"})})})]})})});return e.jsx(V,{className:"modal fade passport-application-modal show",dialgName:"modal-dialog-scrollable modal-lg",show:!!s,closeModal:r,body:u(),header:h(),footer:null,isLoading:!1})}const qe=()=>{const{getData:s,passportApplicationsData:r,isLoadingGet:t,deleteData:h,isLoadingDelete:u}=J(n=>n),[i,j]=C.useState(!1),[o,d]=C.useState(!1),[l,a]=C.useState(!1),[c,g]=C.useState(!1),[v,p]=C.useState(!1),[y,R]=C.useState(!1),b={search:"",page:1,limit:10,fromDate:null,toDate:null,sortBy:"createdAt",sortOrder:"DESC",isExcelExport:"false"},[A,P]=C.useState(b),q={total:5,data:[{id:1,referenceNo:"REF-0001",name:"Abdul Rahman",center:"Dubai Center",arn:"ARN-12345",ppNo:"P1234567 / OLD-889900",dob:"1996-06-12",applicationType:"New",serviceName:"Normal Service",deliveryType:"Courier",status:{value:"Submitted",by:"Dennis",on:"2025-01-10T09:30:00Z"},createdAt:"2025-01-10T09:30:00Z"},{id:2,referenceNo:"REF-0002",name:"Haseeb",center:"Abu Dhabi Center",arn:"ARN-77881",ppNo:"P9988776 / OLD-112233",dob:"1993-11-22",applicationType:"Renewal",serviceName:"Premium",deliveryType:"Counter",status:{value:"In Process",by:"Joel",on:"2025-02-14T12:15:00Z"},createdAt:"2025-02-14T12:15:00Z"},{id:3,referenceNo:"REF-0003",name:"Fathima",center:"Sharjah Center",arn:"ARN-55321",ppNo:"P2233445 / OLD-445566",dob:"1999-02-02",applicationType:"New",serviceName:"Express",deliveryType:"Courier",status:{value:"Approved",by:"Admin",on:"2025-03-05T08:45:00Z"},createdAt:"2025-03-05T08:45:00Z"},{id:4,referenceNo:"REF-0004",name:"Joseph",center:"Ajman Center",arn:"ARN-99331",ppNo:"P6655443 / OLD-998877",dob:"1988-09-10",applicationType:"Renewal",serviceName:"Normal Service",deliveryType:"Counter",status:{value:"Rejected",by:"Supervisor",on:"2025-03-20T10:00:00Z"},createdAt:"2025-03-20T10:00:00Z"},{id:5,referenceNo:"REF-0005",name:"Amina",center:"Dubai Center",arn:"ARN-11229",ppNo:"P4455667 / OLD-111222",dob:"2000-01-30",applicationType:"New",serviceName:"Premium",deliveryType:"Courier",status:{value:"Delivered",by:"Courier",on:"2025-04-02T11:20:00Z"},createdAt:"2025-04-02T11:20:00Z"}]},x=()=>{d(!1),j(!1)};C.useEffect(()=>{},[A]);const f=n=>{P(k=>({...k,sortBy:n,sortOrder:k.sortOrder==="ASC"?"DESC":"ASC"}))},m=n=>{j({id:n==null?void 0:n.id,name:n==null?void 0:n.name})},E=n=>{console.log("Print Receipt:",n)},D=n=>{console.log("Print Barcode:",n)},$=n=>{a(n)},K=n=>{g(n)},Q=n=>{R(n)},X=n=>{console.log("Edit application:",n),d(n)},w=n=>{console.log("Change service/fee:",n),p(n)},M=[{name:"Reference No",selector:"referenceNo"},{name:"Name",selector:"name"},{name:"Center",selector:"center"},{name:"ARN",selector:"arn"},{name:"PP No / Old PP No",selector:"ppNo"},{name:"Date of Birth",selector:"dob",cell:n=>e.jsx("span",{children:n!=null&&n.dob?T(n.dob).format("DD-MMM-YYYY"):"-"})},{name:"Application Type",selector:"applicationType"},{name:"Service Name",selector:"serviceName"},{name:"Delivery Type",selector:"deliveryType"},{name:"Status / By, On",selector:"status",cell:n=>{var k,O,B;return e.jsxs("span",{children:[((k=n==null?void 0:n.status)==null?void 0:k.value)||"-",(O=n==null?void 0:n.status)!=null&&O.by?` / ${n.status.by}`:"",(B=n==null?void 0:n.status)!=null&&B.on?`, ${ce(n.status.on)}`:""]})}},{name:"Action",selector:"action",notView:!0,colClassName:"action-col",cell:n=>e.jsx(Se,{row:n,onPrintReceipt:E,onPrintBarcode:D,onViewApplication:$,onComment:K,onActivityLog:Q,onEditApplication:X,onChangeServiceFee:w,onDelete:m})}],ee=C.useMemo(()=>te.debounce(n=>{P(k=>({...k,search:n,page:1}))},500),[]),se=()=>{{j(!1);return}},L=q;return e.jsxs(e.Fragment,{children:[e.jsx(ne,{addButton:{name:"Add Item",type:"button",action:()=>d(!0)},hideFilter:!0,onSearch:ee,submitFilter:n=>{const{fromDate:k,toDate:O,...B}=n;P({...A,...B,fromDate:k?T(k).format("YYYY-MM-DD"):null,toDate:O?T(O).format("YYYY-MM-DD"):null,page:1})},clearOptions:()=>P(b)}),e.jsx(re,{pagination:{currentPage:A.page,limit:A.limit},count:(L==null?void 0:L.total)||0,columns:M,data:(L==null?void 0:L.data)||[],isLoading:!1,onPageChange:n=>P({...A,page:n}),setLimit:n=>P({...A,limit:n}),onSortChange:f,wrapClasses:"inventory-table-wrap"}),o&&e.jsx(Ce,{showModal:o,closeModal:()=>d(!1),onRefreshPassportApplications:x}),i&&e.jsx(ie,{isDelete:!0,isLoading:!1,showModal:i,closeModal:()=>j(!1),message:`Are you sure you want to delete this ${i==null?void 0:i.name}?`,onCancel:()=>j(!1),onSubmit:se}),l&&e.jsx(Ae,{showModal:l,closeModal:()=>a(!1)}),c&&e.jsx(ke,{showModal:c,closeModal:()=>g(!1)}),v&&e.jsx(Fe,{showModal:v,closeModal:()=>p(!1)}),y&&e.jsx(De,{showModal:y,closeModal:()=>R(!1)})]})};export{qe as default};
